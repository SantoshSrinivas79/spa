{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue","filename":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue","passPerPreset":false,"envName":"development","cwd":"/home/snr/Desktop/Project/spa","root":"/home/snr/Desktop/Project/spa","generatorOpts":{"filename":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue"}},"code":"var draggable;\nmodule.link(\"vuedraggable\", {\n  \"default\": function (v) {\n    draggable = v;\n  }\n}, 0);\nvar compoLang;\nmodule.link(\"../../../both/i18n/lang/elem-label-acc\", {\n  \"default\": function (v) {\n    compoLang = v;\n  }\n}, 1);\nvar Acc_JournalReact;\nmodule.link(\"../../collection/accJournal\", {\n  Acc_JournalReact: function (v) {\n    Acc_JournalReact = v;\n  }\n}, 2);\nmodule.exportDefault({\n  meteor: {\n    langSession: function () {\n      return Session.get('lang') || \"en\";\n    },\n    disabledRemove: function () {\n      return Session.get(\"canRemove\");\n    },\n    disabledUpdate: function () {\n      return Session.get(\"canUpdate\");\n    },\n    newRe: function () {\n      var vm = this;\n      Acc_JournalReact.find({}).fetch();\n      vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n    }\n  },\n  components: {\n    draggable: draggable\n  },\n  data: function () {\n    return {\n      newLoading: true,\n      fullscreen: true,\n      journalData: [],\n      journalDataDisplay: [],\n      multipleSelection: [],\n      journalId: \"\",\n      loading: false,\n      searchData: '',\n      isSearching: false,\n      currentPage: 1,\n      currentSize: 10,\n      count: 0,\n      dialogAddJournal: false,\n      dialogUpdateJournal: false,\n      dialogShowJournal: false,\n      dialogPaid: false,\n      journalForm: {\n        account: \"\",\n        dr: 0,\n        cr: 0,\n        journalDate: moment().toDate(),\n        currencyId: \"KHR\",\n        voucherId: \"\",\n        name: \"\",\n        memo: \"\",\n        totalDr: 0,\n        totalCr: 0,\n        totalAmount: 0,\n        amount: 0,\n        method: \"\"\n      },\n      rules: {\n        journalDate: [{\n          type: 'date',\n          required: true,\n          message: 'Please input Journal Date',\n          trigger: 'blur'\n        }],\n        currencyId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Currency',\n          trigger: 'blur'\n        }],\n        voucherId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Journal No',\n          trigger: 'blur'\n        }],\n        memo: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Memo',\n          trigger: 'blur'\n        }]\n      },\n      rulesPayment: {\n        journalDate: [{\n          type: 'date',\n          required: true,\n          message: 'Please input Journal Date',\n          trigger: 'blur'\n        }],\n        currencyId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Currency',\n          trigger: 'blur'\n        }],\n        method: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Cash Method',\n          trigger: 'blur'\n        }],\n        voucherId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Journal No',\n          trigger: 'blur'\n        }],\n        memo: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Memo',\n          trigger: 'blur'\n        }]\n      },\n      // Options\n      chartAccountDataOption: [],\n      dialog: true,\n      notifications: false,\n      sound: true,\n      widgets: false,\n      labelPosition: \"top\",\n      options: {\n        disabledDate: function (time) {\n          return false;\n        }\n      },\n      disabledDate: false,\n      closeDate: \"\",\n      methodOption: [],\n      type: \"\",\n      journalDetail: {},\n      skip: 0\n    };\n  },\n  mounted: function () {\n    var _this = this;\n\n    this.$jQuery('body').off();\n    var vm = this;\n    vm.options = {\n      disabledDate: function (time) {\n        var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n        return time.getTime() < min;\n      }\n    };\n    var elem = this.$jQuery('el-dialog.dialogJournal');\n\n    var checkEvent = $._data($('body').get(0), 'events');\n\n    if (checkEvent.keyup.length <= 1) {\n      this.$nextTick(function () {\n        _this.$jQuery('body').on('keydown', elem, _this.inputHandler);\n      });\n    }\n  },\n  watch: {\n    currentSize: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * val;\n      this.queryData(this.searchData, this.skip, val + this.skip);\n    },\n    currentPage: function (val) {\n      this.isSearching = true;\n      this.skip = (val - 1) * this.currentSize;\n      this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n    },\n    searchData: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * this.currentSize;\n      this.queryData(val, this.skip, this.currentSize + this.skip);\n    },\n    \"journalForm.journalDate\": function (val) {\n      var vm = this;\n\n      if (vm.dialogUpdateJournal == false) {\n        vm.journalForm.journalDate = val;\n        vm.autoIncreseVouchers(val);\n      }\n\n      if (vm.closeDate && vm.closeDate != \"\" && vm.closeDate != undefined) {\n        vm.options = {\n          disabledDate: function (time) {\n            var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n            return time.getTime() < min;\n          }\n        };\n      } else {\n        vm.options = {\n          disabledDate: function (time) {\n            return false;\n          }\n        };\n      }\n    },\n    \"journalForm.currencyId\": function (val) {\n      if (this.dialogUpdateJournal == false) {\n        this.journalForm.currencyId = val;\n        this.autoIncreseVouchers();\n      }\n    },\n    dialogAddJournal: function (val) {\n      if (val) {\n        this._inputMaskJournal();\n      }\n    },\n    dialogUpdateJournal: function (val) {\n      if (val) {\n        this._inputMaskJournal();\n      }\n    },\n    \"journalForm.account\": function (val) {\n      if (val) {\n        this._inputMaskJournal();\n      }\n    },\n    \"journalForm.dr\": function (val) {\n      if (val) {\n        this.journalForm.cr = 0;\n      }\n    },\n    \"journalForm.cr\": function (val) {\n      if (val) {\n        this.journalForm.dr = 0;\n      }\n    },\n    \"journalForm.method\": function (val) {\n      if (val) {}\n    }\n  },\n  methods: {\n    handleSizeChange: function (val) {\n      this.currentSize = val;\n    },\n    handleCurrentChange: function (val) {\n      this.currentPage = val;\n    },\n    _inputMaskJournal: function () {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if ($(\".el-inputAmount\").length) {\n          new _this2.$_Cleave('.el-inputAmount', {\n            numeral: true,\n            numeralThousandsGroupStyle: 'thousand'\n          });\n        }\n\n        if ($(\".el-inputDR\").length) {\n          new _this2.$_Cleave('.el-inputDR', {\n            numeral: true,\n            numeralThousandsGroupStyle: 'thousand'\n          });\n        }\n\n        if ($(\".el-inputCR\").length) {\n          new _this2.$_Cleave('.el-inputCR', {\n            numeral: true,\n            numeralThousandsGroupStyle: 'thousand'\n          });\n        }\n      }, 200);\n    },\n    queryData: _.debounce(function (val, skip, limit) {\n      var _this3 = this;\n\n      Meteor.call('queryJournal', {\n        q: val,\n        filter: this.filter,\n        rolesArea: Session.get('area'),\n        options: {\n          skip: skip || 0,\n          limit: limit || 10\n        }\n      }, function (err, result) {\n        if (!err) {\n          _this3.journalDataDisplay = result.content;\n          _this3.count = result.countJournal;\n        }\n\n        _this3.isSearching = false;\n      });\n    }, 300),\n    inputHandler: function (e) {\n      if (e.data.init(0).selector === \"el-dialog.dialogJournal\") {\n        var vm = this;\n\n        if (vm.dialogAddJournal === true) {\n          if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.saveJournal(true, e);\n          } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n            e.preventDefault();\n            vm.saveJournal(false, e);\n          }\n        } else if (vm.dialogPaid === true) {\n          if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.saveJournalPaid(true, e, vm.type);\n          } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n            e.preventDefault();\n            vm.saveJournalPaid(false, e, vm.type);\n          }\n        }\n\n        if (vm.dialogAddJournal === false && vm.dialogUpdateJournal === false && vm.dialogPaid === false) {\n          if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.popupJournalAdd();\n            vm.dialogAddJournal = true;\n            vm.autoIncreseVouchers();\n            vm.resetForm();\n          }\n        }\n\n        if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n          e.preventDefault();\n          vm.dialogAddJournal = false;\n        }\n      }\n    },\n    chartAccountOption: function () {\n      var _this4 = this;\n\n      var selector = {};\n\n      if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n        selector.accountTypeId = this.accountTypeId;\n      }\n\n      Meteor.call('queryChartAccountOption', selector, function (err, result) {\n        _this4.chartAccountDataOption = result;\n      });\n    },\n    chartAccountMethodOption: function () {\n      var _this5 = this;\n\n      var selector = {};\n\n      if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n        selector.accountTypeId = this.accountTypeId;\n      }\n\n      Meteor.call('queryChartAccountMethodOption', selector, function (err, result) {\n        _this5.methodOption = result;\n      });\n    },\n    saveJournal: function (isCloseDialog, event) {\n      var _this6 = this;\n\n      event.preventDefault();\n      var vm = this;\n      var checkSubmit = this.checkDrCr();\n\n      if (checkSubmit === false || vm.journalData.length === 0) {\n        vm.$notify.error({\n          title: 'Error',\n          message: 'Dr and Cr is not balance!'\n        });\n        return false;\n      } else {\n        this.$refs[\"journalFormAdd\"].validate(function (valid) {\n          if (valid) {\n            var journalDoc = {\n              journalDate: vm.journalForm.journalDate,\n              journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n              voucherId: vm.journalForm.voucherId,\n              currencyId: vm.journalForm.currencyId,\n              name: vm.journalForm.name,\n              memo: vm.journalForm.memo,\n              total: vm.$_numeral(vm.journalForm.totalDr).value(),\n              rolesArea: Session.get('area')\n            };\n            journalDoc.transaction = vm.journalData;\n            Meteor.call(\"insertJournal\", journalDoc, function (err, result) {\n              if (!err) {\n                vm.$message({\n                  duration: 1000,\n                  message: \"Save Successfully!\",\n                  type: 'success'\n                });\n\n                if (isCloseDialog) {\n                  _this6.dialogAddJournal = false;\n                }\n\n                vm.resetForm();\n              }\n            });\n          }\n        });\n      }\n    },\n    saveJournalPaid: function (isCloseDialog, event, type, isPrint) {\n      var _this7 = this;\n\n      event.preventDefault();\n      var vm = this;\n      this.$refs[\"journalFormPayment\"].validate(function (valid) {\n        if (valid) {\n          var journalDoc = {\n            journalDate: vm.journalForm.journalDate,\n            journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n            voucherId: vm.journalForm.voucherId,\n            currencyId: vm.journalForm.currencyId,\n            name: vm.journalForm.name,\n            memo: vm.journalForm.memo,\n            total: vm.$_numeral(vm.journalForm.totalAmount).value(),\n            rolesArea: Session.get('area'),\n            method: vm.journalForm.method\n          };\n          journalDoc.transaction = vm.journalData;\n\n          if (journalDoc.transaction.length <= 0) {\n            vm.$message({\n              duration: 1000,\n              message: \"Add Payment Account!\",\n              type: 'error'\n            });\n            return false;\n          }\n\n          Meteor.call(\"insertJournalPaid\", journalDoc, type, function (err, result) {\n            if (!err) {\n              if (isPrint === true) {\n                FlowRouter.go('/acc-data/accPayment/print?inv=' + result);\n              } else {\n                vm.$message({\n                  duration: 1000,\n                  message: \"Save Successfully!\",\n                  type: 'success'\n                });\n              }\n\n              if (isCloseDialog) {\n                _this7.dialogPaid = false;\n              }\n\n              vm.resetForm();\n            }\n          });\n        }\n      });\n    },\n    printPaymentInvoice: function (journalId) {\n      FlowRouter.go('/acc-data/accPayment/print?inv=' + journalId);\n    },\n    updateJournal: function (id) {\n      event.preventDefault();\n      var vm = this;\n      var checkSubmit = vm.checkDrCr();\n\n      if (checkSubmit === false || vm.journalData.length === 0) {\n        vm.$notify.error({\n          title: 'Error',\n          message: 'Dr and Cr is not balance!'\n        });\n        return false;\n      } else {\n        vm.$refs[\"journalFormUpdate\"].validate(function (valid) {\n          if (valid) {\n            var journalDoc = {\n              journalDate: vm.journalForm.journalDate,\n              journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n              voucherId: vm.journalForm.voucherId,\n              currencyId: vm.journalForm.currencyId,\n              name: vm.journalForm.name,\n              memo: vm.journalForm.memo,\n              total: vm.$_numeral(vm.journalForm.totalDr).value(),\n              rolesArea: Session.get('area')\n            };\n            journalDoc.transaction = vm.journalData;\n            Meteor.call(\"updateJournal\", journalDoc, id, function (err, result) {\n              if (!err) {\n                vm.$message({\n                  duration: 1000,\n                  message: \"Save Successfully!\",\n                  type: 'success'\n                });\n                vm.dialogUpdateJournal = false;\n                vm.resetForm();\n              }\n            });\n          }\n        });\n      }\n    },\n    removeJournal: function (index, row, rows) {\n      var vm = this;\n\n      if (row.status == \"Normal\") {\n        Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n          if (re == undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n            vm.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n              confirmButtonText: 'OK',\n              cancelButtonText: 'Cancel',\n              type: 'warning'\n            }).then(function () {\n              Meteor.call(\"removeJournal\", row._id, function (err, result) {\n                if (!err) {\n                  rows.splice(index, 1);\n                  vm.$message({\n                    message: \"\\u179B\\u17BB\\u1794 \" + row.journalDateName + \"\\u200B : \" + row.voucherId + \" \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n                    type: 'success'\n                  });\n                } else {\n                  vm.$message({\n                    type: 'error',\n                    message: 'Delete Fialed'\n                  });\n                }\n              });\n            }).catch(function () {\n              vm.$message({\n                type: 'info',\n                message: 'Delete canceled'\n              });\n            });\n          } else {\n            vm.$message({\n              duration: 1000,\n              message: \"You already Closing Entry!!\",\n              type: 'error'\n            });\n          }\n        });\n      } else {\n        vm.$message({\n          duration: 1000,\n          message: \"Not Normal State!!\",\n          type: 'error'\n        });\n      }\n    },\n    popupJournalAdd: function () {\n      var vm = this;\n      $(\".el-dialog__title\").text(\"Add Journal Entry\");\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re != undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    popupJournalPayment: function () {\n      var vm = this;\n      vm.type = \"Payment\"; // $('#dialog').attr('title', 'New Title').dialog();\n\n      $(\".el-dialog__title\").text(\"Payment (Account)\");\n      vm.journalForm.method = \"\";\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re != undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    popupJournalReceive: function () {\n      var vm = this;\n      vm.type = \"Receive\";\n      vm.journalForm.method = \"\"; // $('#dialog').attr('title', 'New Title').dialog();\n\n      $(\".el-dialog__title\").text(\"Receive (Account)\");\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re !== undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    popupJournalUpdate: function (index, row, scope) {\n      var vm = this;\n      $(\".el-dialog__title\").text(\"Update Journal Entry\");\n\n      if (row.status === \"Normal\") {\n        Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n          if (re === undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n            vm.dialogUpdateJournal = true;\n            vm.findJournalById(scope);\n\n            if (re !== undefined) {\n              vm.closeDate = re.closeDate;\n            } else {\n              vm.closeDate = \"\";\n            }\n          } else {\n            vm.$message({\n              duration: 1000,\n              message: \"You already Closing Entry!!\",\n              type: 'error'\n            });\n            vm.dialogUpdateJournal = false;\n            vm.closeDate = \"\";\n          }\n        });\n      } else {\n        vm.closeDate = \"\";\n        this.$message({\n          duration: 1000,\n          message: \"Not Normal State!!\",\n          type: 'error'\n        });\n      }\n    },\n    popupJournalShow: function (row) {\n      var vm = this;\n      this.dialogShowJournal = true;\n      $(\".el-dialog__title\").text(\"Show Journal Entry\");\n      Meteor.call(\"queryJournalByIdShow\", row._id, function (err, result) {\n        if (result) {\n          vm.journalDetail = result;\n        } else {\n          console.log(err.message);\n        }\n      });\n    },\n    findJournalById: function (doc) {\n      var vm = this;\n      this.journalId = doc.row._id;\n      Meteor.call(\"queryJournalById\", doc.row._id, function (err, result) {\n        vm.journalData = [];\n\n        if (result) {\n          result.transaction.forEach(function (obj) {\n            Meteor.call(\"queryChartAccountById\", obj.account, function (err, data) {\n              vm.journalData.push({\n                account: obj.account,\n                accountName: data.code + \" : \" + data.name,\n                dr: obj.dr,\n                cr: obj.cr\n              });\n              vm.getTotalDrCr();\n            });\n          });\n          vm.journalForm.journalDate = result.journalDate;\n          vm.journalForm.currencyId = result.currencyId;\n          vm.journalForm.memo = result.memo;\n          vm.journalForm.name = result.name;\n          vm.journalForm.voucherId = result.voucherId.substr(8, 20);\n        }\n      });\n    },\n    addToJournalData: function () {\n      var vm = this;\n\n      if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n        this.$message({\n          duration: 1000,\n          message: \"Account Can't Empty!!\",\n          type: 'error'\n        });\n        return false;\n      }\n\n      Meteor.call(\"queryChartAccountById\", vm.journalForm.account, function (err, data) {\n        if (data) {\n          vm.journalData.push({\n            account: vm.journalForm.account,\n            accountName: data.code + \" : \" + data.name,\n            dr: vm.$_numeral(vm.journalForm.dr).value(),\n            cr: vm.$_numeral(vm.journalForm.cr).value()\n          });\n          vm.journalForm.account = \"\";\n          vm.$message({\n            duration: 1000,\n            message: \"\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798 \" + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n            type: 'success'\n          });\n          vm.getTotalDrCr();\n        } else {\n          vm.$message({\n            duration: 1000,\n            message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n            type: 'error'\n          });\n        }\n      });\n    },\n    addToJournalPaymentReceiveData: function () {\n      var vm = this;\n\n      if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n        this.$message({\n          duration: 1000,\n          message: \"Account Can't Empty!!\",\n          type: 'error'\n        });\n        return false;\n      }\n\n      Meteor.call(\"queryChartAccountById\", vm.journalForm.account, function (err, data) {\n        if (data) {\n          vm.journalData.push({\n            account: vm.journalForm.account,\n            accountName: data.code + \" : \" + data.name,\n            amount: vm.$_numeral(vm.journalForm.amount).value()\n          });\n          vm.journalForm.account = \"\";\n          vm.$message({\n            duration: 1000,\n            message: \"\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798 \" + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n            type: 'success'\n          });\n          vm.getTotalAmount();\n        } else {\n          vm.$message({\n            duration: 1000,\n            message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n            type: 'error'\n          });\n        }\n      });\n    },\n    removeJournalDetailByIndex: function (index, row) {\n      var _this8 = this;\n\n      this.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n        confirmButtonText: 'OK',\n        cancelButtonText: 'Cancel',\n        type: 'warning'\n      }).then(function () {\n        _this8.journalData.splice(index, 1);\n\n        _this8.$message({\n          message: \"\\u179B\\u17BB\\u1794 \" + row.accountName + \" \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n          type: 'success'\n        });\n\n        _this8.getTotalDrCr();\n      }).catch(function () {\n        _this8.$message({\n          type: 'info',\n          message: 'Delete canceled'\n        });\n      });\n    },\n    updateJournalDetail: function (row, index) {\n      this.journalData[index] = row;\n      var newIndex = index + 1;\n      /*this.$message({\n          duration: 1000,\n          message: `Update Row Number ` + newIndex + \" Successfully !\",\n          type: 'success'\n      });*/\n\n      this.getTotalDrCr();\n    },\n    updateJournalDetailPaymentReceive: function (row, index) {\n      this.journalData[index] = row;\n      var newIndex = index + 1;\n      /*this.$message({\n          duration: 1000,\n          message: `Update Row Number ` + newIndex + \" Successfully !\",\n          type: 'success'\n      });*/\n\n      this.getTotalAmount();\n    },\n    cancel: function () {\n      this.$message({\n        type: 'info',\n        message: 'Canceled'\n      });\n    },\n    resetForm: function () {\n      this.journalData = [];\n      this.journalForm.method = \"\";\n\n      if (this.$refs[\"journalFormAdd\"]) {\n        this.$refs[\"journalFormAdd\"].resetFields();\n        this.getTotalDrCr();\n      }\n\n      if (this.$refs[\"journalFormUpdate\"]) {\n        this.$refs[\"journalFormUpdate\"].resetFields();\n        this.getTotalDrCr();\n      }\n\n      if (this.$refs[\"journalFormPayment\"]) {\n        this.$refs[\"journalFormPayment\"].resetFields();\n        this.getTotalAmount();\n      }\n\n      this.journalForm.name = \"\";\n      this.autoIncreseVouchers();\n    },\n    getTotalDrCr: function () {\n      var vm = this;\n      var totalDr = 0;\n      var totalCr = 0;\n      vm.journalData.forEach(function (obj) {\n        totalDr += parseFloat(obj.dr);\n        totalCr += parseFloat(obj.cr);\n      });\n      vm.journalForm.totalDr = this.$_numeral(totalDr).format(\"0,00.000\");\n      vm.journalForm.totalCr = this.$_numeral(totalCr).format(\"0,00.000\");\n      vm.setFormInputDrCr();\n    },\n    getTotalAmount: function () {\n      var vm = this;\n      var totalAmount = 0;\n      vm.journalData.forEach(function (obj) {\n        totalAmount += parseFloat(obj.amount);\n      });\n      vm.journalForm.totalAmount = this.$_numeral(totalAmount).format(\"0,00.000\");\n      vm.setFormInputAmount();\n    },\n    setFormInputDrCr: function () {\n      this.journalForm.dr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? 0 : -(parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()));\n      this.journalForm.cr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) : 0;\n\n      this._inputMaskJournal();\n    },\n    setFormInputAmount: function () {\n      var vm = this;\n      vm.journalForm.amount = 0;\n\n      vm._inputMaskJournal();\n    },\n    checkDrCr: function () {\n      var vm = this;\n\n      if (vm.$_numeral(vm.journalForm.totalDr).value() === vm.$_numeral(vm.journalForm.totalCr).value()) {\n        return true;\n      }\n\n      return false;\n    },\n    autoIncreseVouchers: function (val) {\n      var vm = this;\n\n      if (val) {\n        vm.journalForm.journalDate = val;\n      }\n\n      Meteor.call(\"autoIncreseVoucher\", Session.get('area'), vm.journalForm.journalDate, vm.journalForm.currencyId, function (err, result) {\n        if (!err) {\n          vm.journalForm.voucherId = (parseInt(result) + 1).toString();\n        }\n      });\n    }\n  },\n  created: function () {\n    this.isSearching = true;\n    this.chartAccountOption();\n    this.chartAccountMethodOption();\n    this.queryData();\n    Meteor.subscribe('Acc_JournalReact');\n  },\n  computed: {\n    langConfig: function () {\n      var _this9 = this;\n\n      var data = compoLang.filter(function (config) {\n        return config.lang === _this9.langSession;\n      })[0]['journal'];\n      return data;\n    }\n  }\n});","map":{"version":3,"sources":["/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue"],"names":["draggable","module","link","v","compoLang","Acc_JournalReact","exportDefault","meteor","langSession","Session","get","disabledRemove","disabledUpdate","newRe","vm","find","fetch","queryData","searchData","skip","currentSize","components","data","newLoading","fullscreen","journalData","journalDataDisplay","multipleSelection","journalId","loading","isSearching","currentPage","count","dialogAddJournal","dialogUpdateJournal","dialogShowJournal","dialogPaid","journalForm","account","dr","cr","journalDate","moment","toDate","currencyId","voucherId","name","memo","totalDr","totalCr","totalAmount","amount","method","rules","type","required","message","trigger","rulesPayment","chartAccountDataOption","dialog","notifications","sound","widgets","labelPosition","options","disabledDate","time","closeDate","methodOption","journalDetail","mounted","$jQuery","off","min","add","getTime","elem","checkEvent","$","_data","keyup","length","$nextTick","on","inputHandler","watch","val","autoIncreseVouchers","undefined","_inputMaskJournal","methods","handleSizeChange","handleCurrentChange","setTimeout","$_Cleave","numeral","numeralThousandsGroupStyle","_","debounce","limit","Meteor","call","q","filter","rolesArea","err","result","content","countJournal","e","init","selector","keyCode","ctrlKey","altKey","preventDefault","saveJournal","saveJournalPaid","popupJournalAdd","resetForm","chartAccountOption","accountTypeId","chartAccountMethodOption","isCloseDialog","event","checkSubmit","checkDrCr","$notify","error","title","$refs","validate","valid","journalDoc","journalDateName","format","total","$_numeral","value","transaction","$message","duration","isPrint","FlowRouter","go","printPaymentInvoice","updateJournal","id","removeJournal","index","row","rows","status","re","$confirm","confirmButtonText","cancelButtonText","then","_id","splice","catch","text","popupJournalPayment","popupJournalReceive","popupJournalUpdate","scope","findJournalById","popupJournalShow","console","log","doc","forEach","obj","push","accountName","code","getTotalDrCr","substr","addToJournalData","addToJournalPaymentReceiveData","getTotalAmount","removeJournalDetailByIndex","updateJournalDetail","newIndex","updateJournalDetailPaymentReceive","cancel","resetFields","parseFloat","setFormInputDrCr","setFormInputAmount","parseInt","toString","created","subscribe","computed","langConfig","config","lang"],"mappings":"AAAA,IAAIA,SAAJ;AAAcC,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA2B;AAAA,uBAASC,CAAT,EAAW;AAACH,IAAAA,SAAS,GAACG,CAAV;AAAY;AAAxB,CAA3B,EAAqD,CAArD;AAAwD,IAAIC,SAAJ;AAAcH,MAAM,CAACC,IAAP,CAAY,wCAAZ,EAAqD;AAAA,uBAASC,CAAT,EAAW;AAACC,IAAAA,SAAS,GAACD,CAAV;AAAY;AAAxB,CAArD,EAA+E,CAA/E;AAAkF,IAAIE,gBAAJ;AAAqBJ,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACG,EAAAA,gBAAD,YAAkBF,CAAlB,EAAoB;AAACE,IAAAA,gBAAgB,GAACF,CAAjB;AAAmB;AAAxC,CAA1C,EAAoF,CAApF;AAA3LF,MAAM,CAACK,aAAP,CAqtBmB;AACXC,EAAAA,MAAM,EAAE;AACJC,IAAAA,WADI,cACU;AACV,aAAOC,OAAO,CAACC,GAAR,CAAY,MAAZ,KAAuB,IAA9B;AACH,KAHG;AAIJC,IAAAA,cAJI,cAIa;AACb,aAAOF,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAP;AACH,KANG;AAOJE,IAAAA,cAPI,cAOa;AACb,aAAOH,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAP;AACH,KATG;AAUJG,IAAAA,KAVI,cAUI;AACJ,UAAIC,EAAE,GAAG,IAAT;AACAT,MAAAA,gBAAgB,CAACU,IAAjB,CAAsB,EAAtB,EAA0BC,KAA1B;AACAF,MAAAA,EAAE,CAACG,SAAH,CAAaH,EAAE,CAACI,UAAhB,EAA4BJ,EAAE,CAACK,IAA/B,EAAqCL,EAAE,CAACM,WAAH,GAAiBN,EAAE,CAACK,IAAzD;AACH;AAdG,GADG;AAkBXE,EAAAA,UAAU,EAAE;AACRrB,IAAAA,SAAS,EAATA;AADQ,GAlBD;AAqBXsB,EAAAA,IArBW,cAqBJ;AACH,WAAO;AACHC,MAAAA,UAAU,EAAE,IADT;AAEHC,MAAAA,UAAU,EAAE,IAFT;AAGHC,MAAAA,WAAW,EAAE,EAHV;AAIHC,MAAAA,kBAAkB,EAAE,EAJjB;AAKHC,MAAAA,iBAAiB,EAAE,EALhB;AAMHC,MAAAA,SAAS,EAAE,EANR;AAOHC,MAAAA,OAAO,EAAE,KAPN;AAQHX,MAAAA,UAAU,EAAE,EART;AASHY,MAAAA,WAAW,EAAE,KATV;AAUHC,MAAAA,WAAW,EAAE,CAVV;AAWHX,MAAAA,WAAW,EAAE,EAXV;AAYHY,MAAAA,KAAK,EAAE,CAZJ;AAaHC,MAAAA,gBAAgB,EAAE,KAbf;AAcHC,MAAAA,mBAAmB,EAAE,KAdlB;AAeHC,MAAAA,iBAAiB,EAAE,KAfhB;AAgBHC,MAAAA,UAAU,EAAE,KAhBT;AAmBHC,MAAAA,WAAW,EAAE;AACTC,QAAAA,OAAO,EAAE,EADA;AAETC,QAAAA,EAAE,EAAE,CAFK;AAGTC,QAAAA,EAAE,EAAE,CAHK;AAITC,QAAAA,WAAW,EAAEC,MAAM,GAAGC,MAAT,EAJJ;AAKTC,QAAAA,UAAU,EAAE,KALH;AAMTC,QAAAA,SAAS,EAAE,EANF;AAOTC,QAAAA,IAAI,EAAE,EAPG;AAQTC,QAAAA,IAAI,EAAE,EARG;AASTC,QAAAA,OAAO,EAAE,CATA;AAUTC,QAAAA,OAAO,EAAE,CAVA;AAWTC,QAAAA,WAAW,EAAE,CAXJ;AAYTC,QAAAA,MAAM,EAAE,CAZC;AAaTC,QAAAA,MAAM,EAAE;AAbC,OAnBV;AAmCHC,MAAAA,KAAK,EAAE;AACHZ,QAAAA,WAAW,EAAE,CAAC;AACVa,UAAAA,IAAI,EAAE,MADI;AAEVC,UAAAA,QAAQ,EAAE,IAFA;AAGVC,UAAAA,OAAO,EAAE,2BAHC;AAIVC,UAAAA,OAAO,EAAE;AAJC,SAAD,CADV;AAOHb,QAAAA,UAAU,EAAE,CAAC;AAACW,UAAAA,QAAQ,EAAE,IAAX;AAAiBD,UAAAA,IAAI,EAAE,QAAvB;AAAiCE,UAAAA,OAAO,EAAE,uBAA1C;AAAmEC,UAAAA,OAAO,EAAE;AAA5E,SAAD,CAPT;AAQHZ,QAAAA,SAAS,EAAE,CAAC;AAACU,UAAAA,QAAQ,EAAE,IAAX;AAAiBD,UAAAA,IAAI,EAAE,QAAvB;AAAiCE,UAAAA,OAAO,EAAE,yBAA1C;AAAqEC,UAAAA,OAAO,EAAE;AAA9E,SAAD,CARR;AASHV,QAAAA,IAAI,EAAE,CAAC;AAACQ,UAAAA,QAAQ,EAAE,IAAX;AAAiBD,UAAAA,IAAI,EAAE,QAAvB;AAAiCE,UAAAA,OAAO,EAAE,mBAA1C;AAA+DC,UAAAA,OAAO,EAAE;AAAxE,SAAD;AATH,OAnCJ;AA8CHC,MAAAA,YAAY,EAAE;AACVjB,QAAAA,WAAW,EAAE,CAAC;AACVa,UAAAA,IAAI,EAAE,MADI;AAEVC,UAAAA,QAAQ,EAAE,IAFA;AAGVC,UAAAA,OAAO,EAAE,2BAHC;AAIVC,UAAAA,OAAO,EAAE;AAJC,SAAD,CADH;AAOVb,QAAAA,UAAU,EAAE,CAAC;AAACW,UAAAA,QAAQ,EAAE,IAAX;AAAiBD,UAAAA,IAAI,EAAE,QAAvB;AAAiCE,UAAAA,OAAO,EAAE,uBAA1C;AAAmEC,UAAAA,OAAO,EAAE;AAA5E,SAAD,CAPF;AAQVL,QAAAA,MAAM,EAAE,CAAC;AAACG,UAAAA,QAAQ,EAAE,IAAX;AAAiBD,UAAAA,IAAI,EAAE,QAAvB;AAAiCE,UAAAA,OAAO,EAAE,0BAA1C;AAAsEC,UAAAA,OAAO,EAAE;AAA/E,SAAD,CARE;AASVZ,QAAAA,SAAS,EAAE,CAAC;AAACU,UAAAA,QAAQ,EAAE,IAAX;AAAiBD,UAAAA,IAAI,EAAE,QAAvB;AAAiCE,UAAAA,OAAO,EAAE,yBAA1C;AAAqEC,UAAAA,OAAO,EAAE;AAA9E,SAAD,CATD;AAUVV,QAAAA,IAAI,EAAE,CAAC;AAACQ,UAAAA,QAAQ,EAAE,IAAX;AAAiBD,UAAAA,IAAI,EAAE,QAAvB;AAAiCE,UAAAA,OAAO,EAAE,mBAA1C;AAA+DC,UAAAA,OAAO,EAAE;AAAxE,SAAD;AAVI,OA9CX;AA2DH;AACAE,MAAAA,sBAAsB,EAAE,EA5DrB;AA8DHC,MAAAA,MAAM,EAAE,IA9DL;AA+DHC,MAAAA,aAAa,EAAE,KA/DZ;AAgEHC,MAAAA,KAAK,EAAE,IAhEJ;AAiEHC,MAAAA,OAAO,EAAE,KAjEN;AAkEHC,MAAAA,aAAa,EAAE,KAlEZ;AAmEHC,MAAAA,OAAO,EAAE;AACLC,QAAAA,YADK,YACQC,IADR,EACc;AACf,iBAAO,KAAP;AACH;AAHI,OAnEN;AAwEHD,MAAAA,YAAY,EAAE,KAxEX;AAyEHE,MAAAA,SAAS,EAAE,EAzER;AA0EHC,MAAAA,YAAY,EAAE,EA1EX;AA2EHf,MAAAA,IAAI,EAAE,EA3EH;AA4EHgB,MAAAA,aAAa,EAAE,EA5EZ;AA6EHnD,MAAAA,IAAI,EAAE;AA7EH,KAAP;AA+EH,GArGU;AAsGXoD,EAAAA,OAtGW,cAsGD;AAAA;;AACN,SAAKC,OAAL,CAAa,MAAb,EAAqBC,GAArB;AACA,QAAI3D,EAAE,GAAG,IAAT;AACAA,IAAAA,EAAE,CAACmD,OAAH,GAAa;AACTC,MAAAA,YADS,YACIC,IADJ,EACU;AACf,YAAIO,GAAG,GAAGhC,MAAM,CAAC5B,EAAE,CAACsD,SAAJ,CAAN,CAAqBO,GAArB,CAAyB,CAAzB,EAA4B,MAA5B,EAAoChC,MAApC,GAA6CiC,OAA7C,EAAV;AACA,eAAOT,IAAI,CAACS,OAAL,KAAiBF,GAAxB;AACH;AAJQ,KAAb;AAQA,QAAIG,IAAI,GAAG,KAAKL,OAAL,CAAa,yBAAb,CAAX;;AACA,QAAIM,UAAU,GAAGC,CAAC,CAACC,KAAF,CAAQD,CAAC,CAAC,MAAD,CAAD,CAAUrE,GAAV,CAAc,CAAd,CAAR,EAA0B,QAA1B,CAAjB;;AACA,QAAIoE,UAAU,CAACG,KAAX,CAAiBC,MAAjB,IAA2B,CAA/B,EAAkC;AAC9B,WAAKC,SAAL,CAAe,YAAM;AACjB,QAAA,KAAI,CAACX,OAAL,CAAa,MAAb,EAAqBY,EAArB,CAAwB,SAAxB,EAAmCP,IAAnC,EAAyC,KAAI,CAACQ,YAA9C;AAEH,OAHD;AAIH;AACJ,GAzHU;AA0HXC,EAAAA,KAAK,EAAE;AACHlE,IAAAA,WADG,YACSmE,GADT,EACc;AACb,WAAKzD,WAAL,GAAmB,IAAnB;AACA,WAAKX,IAAL,GAAY,CAAC,KAAKY,WAAL,GAAmB,CAApB,IAAyBwD,GAArC;AACA,WAAKtE,SAAL,CAAe,KAAKC,UAApB,EAAgC,KAAKC,IAArC,EAA2CoE,GAAG,GAAG,KAAKpE,IAAtD;AACH,KALE;AAMHY,IAAAA,WANG,YAMSwD,GANT,EAMc;AACb,WAAKzD,WAAL,GAAmB,IAAnB;AACA,WAAKX,IAAL,GAAY,CAACoE,GAAG,GAAG,CAAP,IAAY,KAAKnE,WAA7B;AACA,WAAKH,SAAL,CAAe,KAAKC,UAApB,EAAgC,KAAKC,IAArC,EAA2C,KAAKC,WAAL,GAAmB,KAAKD,IAAnE;AACH,KAVE;AAWHD,IAAAA,UAXG,YAWQqE,GAXR,EAWa;AACZ,WAAKzD,WAAL,GAAmB,IAAnB;AACA,WAAKX,IAAL,GAAY,CAAC,KAAKY,WAAL,GAAmB,CAApB,IAAyB,KAAKX,WAA1C;AACA,WAAKH,SAAL,CAAesE,GAAf,EAAoB,KAAKpE,IAAzB,EAA+B,KAAKC,WAAL,GAAmB,KAAKD,IAAvD;AACH,KAfE;AAgBH,6BAhBG,YAgBuBoE,GAhBvB,EAgB4B;AAC3B,UAAIzE,EAAE,GAAG,IAAT;;AACA,UAAIA,EAAE,CAACoB,mBAAH,IAA0B,KAA9B,EAAqC;AACjCpB,QAAAA,EAAE,CAACuB,WAAH,CAAeI,WAAf,GAA6B8C,GAA7B;AACAzE,QAAAA,EAAE,CAAC0E,mBAAH,CAAuBD,GAAvB;AACH;;AACD,UAAIzE,EAAE,CAACsD,SAAH,IAAgBtD,EAAE,CAACsD,SAAH,IAAgB,EAAhC,IAAsCtD,EAAE,CAACsD,SAAH,IAAgBqB,SAA1D,EAAqE;AACjE3E,QAAAA,EAAE,CAACmD,OAAH,GAAa;AACTC,UAAAA,YADS,YACIC,IADJ,EACU;AACf,gBAAIO,GAAG,GAAGhC,MAAM,CAAC5B,EAAE,CAACsD,SAAJ,CAAN,CAAqBO,GAArB,CAAyB,CAAzB,EAA4B,MAA5B,EAAoChC,MAApC,GAA6CiC,OAA7C,EAAV;AACA,mBAAOT,IAAI,CAACS,OAAL,KAAiBF,GAAxB;AACH;AAJQ,SAAb;AAMH,OAPD,MAOO;AACH5D,QAAAA,EAAE,CAACmD,OAAH,GAAa;AACTC,UAAAA,YADS,YACIC,IADJ,EACU;AACf,mBAAO,KAAP;AACH;AAHQ,SAAb;AAKH;AACJ,KApCE;AAqCH,4BArCG,YAqCsBoB,GArCtB,EAqC2B;AAC1B,UAAI,KAAKrD,mBAAL,IAA4B,KAAhC,EAAuC;AACnC,aAAKG,WAAL,CAAiBO,UAAjB,GAA8B2C,GAA9B;AACA,aAAKC,mBAAL;AACH;AACJ,KA1CE;AA2CHvD,IAAAA,gBA3CG,YA2CcsD,GA3Cd,EA2CmB;AAClB,UAAIA,GAAJ,EAAS;AACL,aAAKG,iBAAL;AACH;AACJ,KA/CE;AAgDHxD,IAAAA,mBAhDG,YAgDiBqD,GAhDjB,EAgDsB;AACrB,UAAIA,GAAJ,EAAS;AACL,aAAKG,iBAAL;AACH;AACJ,KApDE;AAqDH,yBArDG,YAqDmBH,GArDnB,EAqDwB;AACvB,UAAIA,GAAJ,EAAS;AACL,aAAKG,iBAAL;AACH;AACJ,KAzDE;AA0DH,oBA1DG,YA0DcH,GA1Dd,EA0DmB;AAClB,UAAIA,GAAJ,EAAS;AACL,aAAKlD,WAAL,CAAiBG,EAAjB,GAAsB,CAAtB;AACH;AACJ,KA9DE;AA+DH,oBA/DG,YA+Dc+C,GA/Dd,EA+DmB;AAClB,UAAIA,GAAJ,EAAS;AACL,aAAKlD,WAAL,CAAiBE,EAAjB,GAAsB,CAAtB;AACH;AACJ,KAnEE;AAoEH,wBApEG,YAoEkBgD,GApElB,EAoEuB;AACtB,UAAIA,GAAJ,EAAS,CACR;AACJ;AAvEE,GA1HI;AAmMXI,EAAAA,OAAO,EAAE;AACLC,IAAAA,gBADK,YACYL,GADZ,EACiB;AAClB,WAAKnE,WAAL,GAAmBmE,GAAnB;AACH,KAHI;AAILM,IAAAA,mBAJK,YAIeN,GAJf,EAIoB;AACrB,WAAKxD,WAAL,GAAmBwD,GAAnB;AACH,KANI;AAOLG,IAAAA,iBAPK,cAOe;AAAA;;AAChBI,MAAAA,UAAU,CAAC,YAAM;AACb,YAAIf,CAAC,CAAC,iBAAD,CAAD,CAAqBG,MAAzB,EAAiC;AAC7B,cAAI,MAAI,CAACa,QAAT,CAAkB,iBAAlB,EAAqC;AACjCC,YAAAA,OAAO,EAAE,IADwB;AAEjCC,YAAAA,0BAA0B,EAAE;AAFK,WAArC;AAIH;;AAED,YAAIlB,CAAC,CAAC,aAAD,CAAD,CAAiBG,MAArB,EAA6B;AACzB,cAAI,MAAI,CAACa,QAAT,CAAkB,aAAlB,EAAiC;AAC7BC,YAAAA,OAAO,EAAE,IADoB;AAE7BC,YAAAA,0BAA0B,EAAE;AAFC,WAAjC;AAIH;;AAED,YAAIlB,CAAC,CAAC,aAAD,CAAD,CAAiBG,MAArB,EAA6B;AACzB,cAAI,MAAI,CAACa,QAAT,CAAkB,aAAlB,EAAiC;AAC7BC,YAAAA,OAAO,EAAE,IADoB;AAE7BC,YAAAA,0BAA0B,EAAE;AAFC,WAAjC;AAIH;AAGJ,OAvBS,EAuBP,GAvBO,CAAV;AAwBH,KAhCI;AAiCLhF,IAAAA,SAAS,EAAEiF,CAAC,CAACC,QAAF,CAAW,UAAUZ,GAAV,EAAepE,IAAf,EAAqBiF,KAArB,EAA4B;AAAA;;AAC9CC,MAAAA,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA4B;AACxBC,QAAAA,CAAC,EAAEhB,GADqB;AAExBiB,QAAAA,MAAM,EAAE,KAAKA,MAFW;AAGxBC,QAAAA,SAAS,EAAChG,OAAO,CAACC,GAAR,CAAY,MAAZ,CAHc;AAIxBuD,QAAAA,OAAO,EAAE;AAAC9C,UAAAA,IAAI,EAAEA,IAAI,IAAI,CAAf;AAAkBiF,UAAAA,KAAK,EAAEA,KAAK,IAAI;AAAlC;AAJe,OAA5B,EAKG,UAACM,GAAD,EAAMC,MAAN,EAAiB;AAChB,YAAI,CAACD,GAAL,EAAU;AACN,UAAA,MAAI,CAAChF,kBAAL,GAA0BiF,MAAM,CAACC,OAAjC;AACA,UAAA,MAAI,CAAC5E,KAAL,GAAa2E,MAAM,CAACE,YAApB;AACH;;AACD,QAAA,MAAI,CAAC/E,WAAL,GAAmB,KAAnB;AACH,OAXD;AAYH,KAbU,EAaR,GAbQ,CAjCN;AAgDLuD,IAAAA,YAhDK,YAgDQyB,CAhDR,EAgDW;AACZ,UAAIA,CAAC,CAACxF,IAAF,CAAOyF,IAAP,CAAY,CAAZ,EAAeC,QAAf,KAA4B,yBAAhC,EAA2D;AACvD,YAAIlG,EAAE,GAAG,IAAT;;AACA,YAAIA,EAAE,CAACmB,gBAAH,KAAwB,IAA5B,EAAkC;AAC9B,cAAI6E,CAAC,CAACG,OAAF,KAAc,EAAd,IAAoBH,CAAC,CAACI,OAAtB,IAAiC,CAACJ,CAAC,CAACK,MAAxC,EAAgD;AAC5CL,YAAAA,CAAC,CAACM,cAAF;AACAtG,YAAAA,EAAE,CAACuG,WAAH,CAAe,IAAf,EAAqBP,CAArB;AACH,WAHD,MAGO,IAAIA,CAAC,CAACG,OAAF,KAAc,EAAd,IAAoBH,CAAC,CAACI,OAAtB,IAAiCJ,CAAC,CAACK,MAAvC,EAA+C;AAClDL,YAAAA,CAAC,CAACM,cAAF;AACAtG,YAAAA,EAAE,CAACuG,WAAH,CAAe,KAAf,EAAsBP,CAAtB;AACH;AACJ,SARD,MAQO,IAAIhG,EAAE,CAACsB,UAAH,KAAkB,IAAtB,EAA4B;AAC/B,cAAI0E,CAAC,CAACG,OAAF,KAAc,EAAd,IAAoBH,CAAC,CAACI,OAAtB,IAAiC,CAACJ,CAAC,CAACK,MAAxC,EAAgD;AAC5CL,YAAAA,CAAC,CAACM,cAAF;AACAtG,YAAAA,EAAE,CAACwG,eAAH,CAAmB,IAAnB,EAAyBR,CAAzB,EAA4BhG,EAAE,CAACwC,IAA/B;AACH,WAHD,MAGO,IAAIwD,CAAC,CAACG,OAAF,KAAc,EAAd,IAAoBH,CAAC,CAACI,OAAtB,IAAiCJ,CAAC,CAACK,MAAvC,EAA+C;AAClDL,YAAAA,CAAC,CAACM,cAAF;AACAtG,YAAAA,EAAE,CAACwG,eAAH,CAAmB,KAAnB,EAA0BR,CAA1B,EAA6BhG,EAAE,CAACwC,IAAhC;AAEH;AACJ;;AAED,YAAIxC,EAAE,CAACmB,gBAAH,KAAwB,KAAxB,IAAiCnB,EAAE,CAACoB,mBAAH,KAA2B,KAA5D,IAAqEpB,EAAE,CAACsB,UAAH,KAAkB,KAA3F,EAAkG;AAC9F,cAAI0E,CAAC,CAACG,OAAF,KAAc,GAAd,IAAqB,CAACH,CAAC,CAACI,OAAxB,IAAmC,CAACJ,CAAC,CAACK,MAA1C,EAAkD;AAC9CL,YAAAA,CAAC,CAACM,cAAF;AACAtG,YAAAA,EAAE,CAACyG,eAAH;AACAzG,YAAAA,EAAE,CAACmB,gBAAH,GAAsB,IAAtB;AACAnB,YAAAA,EAAE,CAAC0E,mBAAH;AACA1E,YAAAA,EAAE,CAAC0G,SAAH;AACH;AACJ;;AACD,YAAIV,CAAC,CAACG,OAAF,KAAc,EAAd,IAAoB,CAACH,CAAC,CAACI,OAAvB,IAAkC,CAACJ,CAAC,CAACK,MAAzC,EAAiD;AAC7CL,UAAAA,CAAC,CAACM,cAAF;AACAtG,UAAAA,EAAE,CAACmB,gBAAH,GAAsB,KAAtB;AACH;AACJ;AAGJ,KAtFI;AAuFLwF,IAAAA,kBAvFK,cAuFgB;AAAA;;AACjB,UAAIT,QAAQ,GAAG,EAAf;;AACA,UAAI,KAAKU,aAAL,KAAuB,EAAvB,IAA6B,KAAKA,aAAL,KAAuBjC,SAAxD,EAAmE;AAC/DuB,QAAAA,QAAQ,CAACU,aAAT,GAAyB,KAAKA,aAA9B;AACH;;AAEDrB,MAAAA,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAuCU,QAAvC,EAAiD,UAACN,GAAD,EAAMC,MAAN,EAAiB;AAC9D,QAAA,MAAI,CAAChD,sBAAL,GAA8BgD,MAA9B;AACH,OAFD;AAGH,KAhGI;AAiGLgB,IAAAA,wBAjGK,cAiGsB;AAAA;;AACvB,UAAIX,QAAQ,GAAG,EAAf;;AACA,UAAI,KAAKU,aAAL,KAAuB,EAAvB,IAA6B,KAAKA,aAAL,KAAuBjC,SAAxD,EAAmE;AAC/DuB,QAAAA,QAAQ,CAACU,aAAT,GAAyB,KAAKA,aAA9B;AACH;;AACDrB,MAAAA,MAAM,CAACC,IAAP,CAAY,+BAAZ,EAA6CU,QAA7C,EAAuD,UAACN,GAAD,EAAMC,MAAN,EAAiB;AACpE,QAAA,MAAI,CAACtC,YAAL,GAAoBsC,MAApB;AACH,OAFD;AAGH,KAzGI;AA0GLU,IAAAA,WA1GK,YA0GOO,aA1GP,EA0GsBC,KA1GtB,EA0G6B;AAAA;;AAC9BA,MAAAA,KAAK,CAACT,cAAN;AACA,UAAItG,EAAE,GAAG,IAAT;AACA,UAAIgH,WAAW,GAAG,KAAKC,SAAL,EAAlB;;AACA,UAAID,WAAW,KAAK,KAAhB,IAAyBhH,EAAE,CAACW,WAAH,CAAeyD,MAAf,KAA0B,CAAvD,EAA0D;AACtDpE,QAAAA,EAAE,CAACkH,OAAH,CAAWC,KAAX,CAAiB;AACbC,UAAAA,KAAK,EAAE,OADM;AAEb1E,UAAAA,OAAO,EAAE;AAFI,SAAjB;AAMA,eAAO,KAAP;AACH,OARD,MAQO;AACH,aAAK2E,KAAL,CAAW,gBAAX,EAA6BC,QAA7B,CAAsC,UAACC,KAAD,EAAW;AAC7C,cAAIA,KAAJ,EAAW;AACP,gBAAIC,UAAU,GAAG;AACb7F,cAAAA,WAAW,EAAE3B,EAAE,CAACuB,WAAH,CAAeI,WADf;AAEb8F,cAAAA,eAAe,EAAE7F,MAAM,CAAC5B,EAAE,CAACuB,WAAH,CAAeI,WAAhB,CAAN,CAAmC+F,MAAnC,CAA0C,YAA1C,CAFJ;AAGb3F,cAAAA,SAAS,EAAE/B,EAAE,CAACuB,WAAH,CAAeQ,SAHb;AAIbD,cAAAA,UAAU,EAAE9B,EAAE,CAACuB,WAAH,CAAeO,UAJd;AAKbE,cAAAA,IAAI,EAAEhC,EAAE,CAACuB,WAAH,CAAeS,IALR;AAMbC,cAAAA,IAAI,EAAEjC,EAAE,CAACuB,WAAH,CAAeU,IANR;AAOb0F,cAAAA,KAAK,EAAE3H,EAAE,CAAC4H,SAAH,CAAa5H,EAAE,CAACuB,WAAH,CAAeW,OAA5B,EAAqC2F,KAArC,EAPM;AAQblC,cAAAA,SAAS,EAAEhG,OAAO,CAACC,GAAR,CAAY,MAAZ;AARE,aAAjB;AAUA4H,YAAAA,UAAU,CAACM,WAAX,GAAyB9H,EAAE,CAACW,WAA5B;AACA4E,YAAAA,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA6BgC,UAA7B,EAAyC,UAAC5B,GAAD,EAAMC,MAAN,EAAiB;AACtD,kBAAI,CAACD,GAAL,EAAU;AACN5F,gBAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,kBAAAA,QAAQ,EAAE,IADF;AAERtF,kBAAAA,OAAO,sBAFC;AAGRF,kBAAAA,IAAI,EAAE;AAHE,iBAAZ;;AAMA,oBAAIsE,aAAJ,EAAmB;AACf,kBAAA,MAAI,CAAC3F,gBAAL,GAAwB,KAAxB;AACH;;AACDnB,gBAAAA,EAAE,CAAC0G,SAAH;AACH;AACJ,aAbD;AAcH;AACJ,SA5BD;AA6BH;AAGJ,KAvJI;AAwJLF,IAAAA,eAxJK,YAwJWM,aAxJX,EAwJ0BC,KAxJ1B,EAwJiCvE,IAxJjC,EAwJuCyF,OAxJvC,EAwJgD;AAAA;;AACjDlB,MAAAA,KAAK,CAACT,cAAN;AACA,UAAItG,EAAE,GAAG,IAAT;AACA,WAAKqH,KAAL,CAAW,oBAAX,EAAiCC,QAAjC,CAA0C,UAACC,KAAD,EAAW;AACjD,YAAIA,KAAJ,EAAW;AACP,cAAIC,UAAU,GAAG;AACb7F,YAAAA,WAAW,EAAE3B,EAAE,CAACuB,WAAH,CAAeI,WADf;AAEb8F,YAAAA,eAAe,EAAE7F,MAAM,CAAC5B,EAAE,CAACuB,WAAH,CAAeI,WAAhB,CAAN,CAAmC+F,MAAnC,CAA0C,YAA1C,CAFJ;AAGb3F,YAAAA,SAAS,EAAE/B,EAAE,CAACuB,WAAH,CAAeQ,SAHb;AAIbD,YAAAA,UAAU,EAAE9B,EAAE,CAACuB,WAAH,CAAeO,UAJd;AAKbE,YAAAA,IAAI,EAAEhC,EAAE,CAACuB,WAAH,CAAeS,IALR;AAMbC,YAAAA,IAAI,EAAEjC,EAAE,CAACuB,WAAH,CAAeU,IANR;AAOb0F,YAAAA,KAAK,EAAE3H,EAAE,CAAC4H,SAAH,CAAa5H,EAAE,CAACuB,WAAH,CAAea,WAA5B,EAAyCyF,KAAzC,EAPM;AAQblC,YAAAA,SAAS,EAAEhG,OAAO,CAACC,GAAR,CAAY,MAAZ,CARE;AASb0C,YAAAA,MAAM,EAAEtC,EAAE,CAACuB,WAAH,CAAee;AATV,WAAjB;AAWAkF,UAAAA,UAAU,CAACM,WAAX,GAAyB9H,EAAE,CAACW,WAA5B;;AACA,cAAI6G,UAAU,CAACM,WAAX,CAAuB1D,MAAvB,IAAiC,CAArC,EAAwC;AACpCpE,YAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,cAAAA,QAAQ,EAAE,IADF;AAERtF,cAAAA,OAAO,wBAFC;AAGRF,cAAAA,IAAI,EAAE;AAHE,aAAZ;AAKA,mBAAO,KAAP;AACH;;AAED+C,UAAAA,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAiCgC,UAAjC,EAA6ChF,IAA7C,EAAmD,UAACoD,GAAD,EAAMC,MAAN,EAAiB;AAChE,gBAAI,CAACD,GAAL,EAAU;AACN,kBAAIqC,OAAO,KAAK,IAAhB,EAAsB;AAClBC,gBAAAA,UAAU,CAACC,EAAX,CAAc,oCAAoCtC,MAAlD;AAEH,eAHD,MAGO;AACH7F,gBAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,kBAAAA,QAAQ,EAAE,IADF;AAERtF,kBAAAA,OAAO,sBAFC;AAGRF,kBAAAA,IAAI,EAAE;AAHE,iBAAZ;AAMH;;AAED,kBAAIsE,aAAJ,EAAmB;AACf,gBAAA,MAAI,CAACxF,UAAL,GAAkB,KAAlB;AACH;;AACDtB,cAAAA,EAAE,CAAC0G,SAAH;AACH;AACJ,WAnBD;AAoBH;AACJ,OA5CD;AA+CH,KA1MI;AA2ML0B,IAAAA,mBA3MK,YA2MetH,SA3Mf,EA2M0B;AAC3BoH,MAAAA,UAAU,CAACC,EAAX,CAAc,oCAAoCrH,SAAlD;AACH,KA7MI;AA8MLuH,IAAAA,aA9MK,YA8MSC,EA9MT,EA8Ma;AACdvB,MAAAA,KAAK,CAACT,cAAN;AACA,UAAItG,EAAE,GAAG,IAAT;AACA,UAAIgH,WAAW,GAAGhH,EAAE,CAACiH,SAAH,EAAlB;;AACA,UAAID,WAAW,KAAK,KAAhB,IAAyBhH,EAAE,CAACW,WAAH,CAAeyD,MAAf,KAA0B,CAAvD,EAA0D;AACtDpE,QAAAA,EAAE,CAACkH,OAAH,CAAWC,KAAX,CAAiB;AACbC,UAAAA,KAAK,EAAE,OADM;AAEb1E,UAAAA,OAAO,EAAE;AAFI,SAAjB;AAIA,eAAO,KAAP;AACH,OAND,MAMO;AACH1C,QAAAA,EAAE,CAACqH,KAAH,CAAS,mBAAT,EAA8BC,QAA9B,CAAuC,UAACC,KAAD,EAAW;AAC9C,cAAIA,KAAJ,EAAW;AACP,gBAAIC,UAAU,GAAG;AACb7F,cAAAA,WAAW,EAAE3B,EAAE,CAACuB,WAAH,CAAeI,WADf;AAEb8F,cAAAA,eAAe,EAAE7F,MAAM,CAAC5B,EAAE,CAACuB,WAAH,CAAeI,WAAhB,CAAN,CAAmC+F,MAAnC,CAA0C,YAA1C,CAFJ;AAGb3F,cAAAA,SAAS,EAAE/B,EAAE,CAACuB,WAAH,CAAeQ,SAHb;AAIbD,cAAAA,UAAU,EAAE9B,EAAE,CAACuB,WAAH,CAAeO,UAJd;AAKbE,cAAAA,IAAI,EAAEhC,EAAE,CAACuB,WAAH,CAAeS,IALR;AAMbC,cAAAA,IAAI,EAAEjC,EAAE,CAACuB,WAAH,CAAeU,IANR;AAOb0F,cAAAA,KAAK,EAAE3H,EAAE,CAAC4H,SAAH,CAAa5H,EAAE,CAACuB,WAAH,CAAeW,OAA5B,EAAqC2F,KAArC,EAPM;AAQblC,cAAAA,SAAS,EAAEhG,OAAO,CAACC,GAAR,CAAY,MAAZ;AARE,aAAjB;AAUA4H,YAAAA,UAAU,CAACM,WAAX,GAAyB9H,EAAE,CAACW,WAA5B;AACA4E,YAAAA,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA6BgC,UAA7B,EAAyCc,EAAzC,EAA6C,UAAC1C,GAAD,EAAMC,MAAN,EAAiB;AAC1D,kBAAI,CAACD,GAAL,EAAU;AACN5F,gBAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,kBAAAA,QAAQ,EAAE,IADF;AAERtF,kBAAAA,OAAO,sBAFC;AAGRF,kBAAAA,IAAI,EAAE;AAHE,iBAAZ;AAMAxC,gBAAAA,EAAE,CAACoB,mBAAH,GAAyB,KAAzB;AAEApB,gBAAAA,EAAE,CAAC0G,SAAH;AACH;AACJ,aAZD;AAaH;AACJ,SA3BD;AA4BH;AAEJ,KAvPI;AAwPL6B,IAAAA,aAxPK,YAwPSC,KAxPT,EAwPgBC,GAxPhB,EAwPqBC,IAxPrB,EAwP2B;AAC5B,UAAI1I,EAAE,GAAG,IAAT;;AACA,UAAIyI,GAAG,CAACE,MAAJ,IAAc,QAAlB,EAA4B;AACxBpD,QAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqC7F,OAAO,CAACC,GAAR,CAAY,MAAZ,CAArC,EAA0D,UAAUgG,GAAV,EAAegD,EAAf,EAAmB;AACzE,cAAIA,EAAE,IAAIjE,SAAN,IAAmBiE,EAAE,CAACtF,SAAH,CAAaQ,OAAb,KAAyB2E,GAAG,CAAC9G,WAAJ,CAAgBmC,OAAhB,EAAhD,EAA2E;AACvE9D,YAAAA,EAAE,CAAC6I,QAAH,CAAY,kDAAZ,EAAgE,SAAhE,EAA2E;AACvEC,cAAAA,iBAAiB,EAAE,IADoD;AAEvEC,cAAAA,gBAAgB,EAAE,QAFqD;AAGvEvG,cAAAA,IAAI,EAAE;AAHiE,aAA3E,EAIGwG,IAJH,CAIQ,YAAM;AAGVzD,cAAAA,MAAM,CAACC,IAAP,CAAY,eAAZ,EAA6BiD,GAAG,CAACQ,GAAjC,EAAsC,UAACrD,GAAD,EAAMC,MAAN,EAAiB;AACnD,oBAAI,CAACD,GAAL,EAAU;AACN8C,kBAAAA,IAAI,CAACQ,MAAL,CAAYV,KAAZ,EAAmB,CAAnB;AACAxI,kBAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRrF,oBAAAA,OAAO,0BAAS+F,GAAG,CAAChB,eAAb,iBAAmCgB,GAAG,CAAC1G,SAAvC,4DADC;AAERS,oBAAAA,IAAI,EAAE;AAFE,mBAAZ;AAIH,iBAND,MAMO;AACHxC,kBAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRvF,oBAAAA,IAAI,EAAE,OADE;AAERE,oBAAAA,OAAO,EAAE;AAFD,mBAAZ;AAIH;AAEJ,eAdD;AAiBH,aAxBD,EAwBGyG,KAxBH,CAwBS,YAAM;AACXnJ,cAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRvF,gBAAAA,IAAI,EAAE,MADE;AAERE,gBAAAA,OAAO,EAAE;AAFD,eAAZ;AAIH,aA7BD;AA8BH,WA/BD,MA+BO;AACH1C,YAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,cAAAA,QAAQ,EAAE,IADF;AAERtF,cAAAA,OAAO,EAAE,6BAFD;AAGRF,cAAAA,IAAI,EAAE;AAHE,aAAZ;AAKH;AACJ,SAvCD;AAwCH,OAzCD,MAyCO;AACHxC,QAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,UAAAA,QAAQ,EAAE,IADF;AAERtF,UAAAA,OAAO,EAAE,oBAFD;AAGRF,UAAAA,IAAI,EAAE;AAHE,SAAZ;AAKH;AAGJ,KA5SI;AA6SLiE,IAAAA,eA7SK,cA6Sa;AACd,UAAIzG,EAAE,GAAG,IAAT;AACAiE,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBmF,IAAvB,CAA4B,mBAA5B;AACA7D,MAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqC7F,OAAO,CAACC,GAAR,CAAY,MAAZ,CAArC,EAA0D,UAAUgG,GAAV,EAAegD,EAAf,EAAmB;AACzE,YAAIA,EAAE,IAAIjE,SAAV,EAAqB;AACjB3E,UAAAA,EAAE,CAACsD,SAAH,GAAesF,EAAE,CAACtF,SAAlB;AACH,SAFD,MAEO;AACHtD,UAAAA,EAAE,CAACsD,SAAH,GAAe,EAAf;AACH;AACJ,OAND;AAOH,KAvTI;AAwTL+F,IAAAA,mBAxTK,cAwTiB;AAClB,UAAIrJ,EAAE,GAAG,IAAT;AACAA,MAAAA,EAAE,CAACwC,IAAH,GAAU,SAAV,CAFkB,CAGlB;;AAEAyB,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBmF,IAAvB,CAA4B,mBAA5B;AACApJ,MAAAA,EAAE,CAACuB,WAAH,CAAee,MAAf,GAAwB,EAAxB;AAEAiD,MAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqC7F,OAAO,CAACC,GAAR,CAAY,MAAZ,CAArC,EAA0D,UAAUgG,GAAV,EAAegD,EAAf,EAAmB;AACzE,YAAIA,EAAE,IAAIjE,SAAV,EAAqB;AACjB3E,UAAAA,EAAE,CAACsD,SAAH,GAAesF,EAAE,CAACtF,SAAlB;AACH,SAFD,MAEO;AACHtD,UAAAA,EAAE,CAACsD,SAAH,GAAe,EAAf;AACH;AACJ,OAND;AAOH,KAvUI;AAwULgG,IAAAA,mBAxUK,cAwUiB;AAClB,UAAItJ,EAAE,GAAG,IAAT;AACAA,MAAAA,EAAE,CAACwC,IAAH,GAAU,SAAV;AACAxC,MAAAA,EAAE,CAACuB,WAAH,CAAee,MAAf,GAAwB,EAAxB,CAHkB,CAKlB;;AACA2B,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBmF,IAAvB,CAA4B,mBAA5B;AAEA7D,MAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqC7F,OAAO,CAACC,GAAR,CAAY,MAAZ,CAArC,EAA0D,UAAUgG,GAAV,EAAegD,EAAf,EAAmB;AACzE,YAAIA,EAAE,KAAKjE,SAAX,EAAsB;AAClB3E,UAAAA,EAAE,CAACsD,SAAH,GAAesF,EAAE,CAACtF,SAAlB;AACH,SAFD,MAEO;AACHtD,UAAAA,EAAE,CAACsD,SAAH,GAAe,EAAf;AACH;AACJ,OAND;AAOH,KAvVI;AAwVLiG,IAAAA,kBAxVK,YAwVcf,KAxVd,EAwVqBC,GAxVrB,EAwV0Be,KAxV1B,EAwViC;AAClC,UAAIxJ,EAAE,GAAG,IAAT;AACAiE,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBmF,IAAvB,CAA4B,sBAA5B;;AACA,UAAIX,GAAG,CAACE,MAAJ,KAAe,QAAnB,EAA6B;AACzBpD,QAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqC7F,OAAO,CAACC,GAAR,CAAY,MAAZ,CAArC,EAA0D,UAAUgG,GAAV,EAAegD,EAAf,EAAmB;AACzE,cAAIA,EAAE,KAAKjE,SAAP,IAAoBiE,EAAE,CAACtF,SAAH,CAAaQ,OAAb,KAAyB2E,GAAG,CAAC9G,WAAJ,CAAgBmC,OAAhB,EAAjD,EAA4E;AACxE9D,YAAAA,EAAE,CAACoB,mBAAH,GAAyB,IAAzB;AACApB,YAAAA,EAAE,CAACyJ,eAAH,CAAmBD,KAAnB;;AACA,gBAAIZ,EAAE,KAAKjE,SAAX,EAAsB;AAClB3E,cAAAA,EAAE,CAACsD,SAAH,GAAesF,EAAE,CAACtF,SAAlB;AACH,aAFD,MAEO;AACHtD,cAAAA,EAAE,CAACsD,SAAH,GAAe,EAAf;AACH;AAEJ,WATD,MASO;AACHtD,YAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,cAAAA,QAAQ,EAAE,IADF;AAERtF,cAAAA,OAAO,EAAE,6BAFD;AAGRF,cAAAA,IAAI,EAAE;AAHE,aAAZ;AAKAxC,YAAAA,EAAE,CAACoB,mBAAH,GAAyB,KAAzB;AACApB,YAAAA,EAAE,CAACsD,SAAH,GAAe,EAAf;AACH;AACJ,SAnBD;AAoBH,OArBD,MAqBO;AACHtD,QAAAA,EAAE,CAACsD,SAAH,GAAe,EAAf;AACA,aAAKyE,QAAL,CAAc;AACVC,UAAAA,QAAQ,EAAE,IADA;AAEVtF,UAAAA,OAAO,EAAE,oBAFC;AAGVF,UAAAA,IAAI,EAAE;AAHI,SAAd;AAKH;AACJ,KAxXI;AAyXLkH,IAAAA,gBAzXK,YAyXYjB,GAzXZ,EAyXiB;AAClB,UAAIzI,EAAE,GAAG,IAAT;AACA,WAAKqB,iBAAL,GAAyB,IAAzB;AACA4C,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBmF,IAAvB,CAA4B,oBAA5B;AACA7D,MAAAA,MAAM,CAACC,IAAP,CAAY,sBAAZ,EAAoCiD,GAAG,CAACQ,GAAxC,EAA6C,UAACrD,GAAD,EAAMC,MAAN,EAAiB;AAC1D,YAAIA,MAAJ,EAAY;AACR7F,UAAAA,EAAE,CAACwD,aAAH,GAAmBqC,MAAnB;AACH,SAFD,MAEO;AACH8D,UAAAA,OAAO,CAACC,GAAR,CAAYhE,GAAG,CAAClD,OAAhB;AACH;AACJ,OAND;AAOH,KApYI;AAqYL+G,IAAAA,eArYK,YAqYWI,GArYX,EAqYgB;AACjB,UAAI7J,EAAE,GAAG,IAAT;AACA,WAAKc,SAAL,GAAiB+I,GAAG,CAACpB,GAAJ,CAAQQ,GAAzB;AAEA1D,MAAAA,MAAM,CAACC,IAAP,CAAY,kBAAZ,EAAgCqE,GAAG,CAACpB,GAAJ,CAAQQ,GAAxC,EAA6C,UAACrD,GAAD,EAAMC,MAAN,EAAiB;AAC1D7F,QAAAA,EAAE,CAACW,WAAH,GAAiB,EAAjB;;AACA,YAAIkF,MAAJ,EAAY;AACRA,UAAAA,MAAM,CAACiC,WAAP,CAAmBgC,OAAnB,CAA2B,UAAUC,GAAV,EAAe;AACtCxE,YAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqCuE,GAAG,CAACvI,OAAzC,EAAkD,UAACoE,GAAD,EAAMpF,IAAN,EAAe;AAC7DR,cAAAA,EAAE,CAACW,WAAH,CAAeqJ,IAAf,CAAoB;AAChBxI,gBAAAA,OAAO,EAAEuI,GAAG,CAACvI,OADG;AAEhByI,gBAAAA,WAAW,EAAEzJ,IAAI,CAAC0J,IAAL,GAAY,KAAZ,GAAoB1J,IAAI,CAACwB,IAFtB;AAGhBP,gBAAAA,EAAE,EAAEsI,GAAG,CAACtI,EAHQ;AAIhBC,gBAAAA,EAAE,EAAEqI,GAAG,CAACrI;AAJQ,eAApB;AAOA1B,cAAAA,EAAE,CAACmK,YAAH;AACH,aATD;AAUH,WAXD;AAYAnK,UAAAA,EAAE,CAACuB,WAAH,CAAeI,WAAf,GAA6BkE,MAAM,CAAClE,WAApC;AACA3B,UAAAA,EAAE,CAACuB,WAAH,CAAeO,UAAf,GAA4B+D,MAAM,CAAC/D,UAAnC;AACA9B,UAAAA,EAAE,CAACuB,WAAH,CAAeU,IAAf,GAAsB4D,MAAM,CAAC5D,IAA7B;AACAjC,UAAAA,EAAE,CAACuB,WAAH,CAAeS,IAAf,GAAsB6D,MAAM,CAAC7D,IAA7B;AACAhC,UAAAA,EAAE,CAACuB,WAAH,CAAeQ,SAAf,GAA2B8D,MAAM,CAAC9D,SAAP,CAAiBqI,MAAjB,CAAwB,CAAxB,EAA2B,EAA3B,CAA3B;AACH;AACJ,OArBD;AAuBH,KAhaI;AAiaLC,IAAAA,gBAjaK,cAiac;AACf,UAAIrK,EAAE,GAAG,IAAT;;AACA,UAAIA,EAAE,CAACuB,WAAH,CAAeC,OAAf,IAA0B,EAA1B,IAAgCxB,EAAE,CAACuB,WAAH,CAAeC,OAAf,IAA0BmD,SAA9D,EAAyE;AACrE,aAAKoD,QAAL,CAAc;AACVC,UAAAA,QAAQ,EAAE,IADA;AAEVtF,UAAAA,OAAO,EAAE,uBAFC;AAGVF,UAAAA,IAAI,EAAE;AAHI,SAAd;AAKA,eAAO,KAAP;AACH;;AAED+C,MAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqCxF,EAAE,CAACuB,WAAH,CAAeC,OAApD,EAA6D,UAACoE,GAAD,EAAMpF,IAAN,EAAe;AACxE,YAAIA,IAAJ,EAAU;AACNR,UAAAA,EAAE,CAACW,WAAH,CAAeqJ,IAAf,CAAoB;AAChBxI,YAAAA,OAAO,EAAExB,EAAE,CAACuB,WAAH,CAAeC,OADR;AAEhByI,YAAAA,WAAW,EAAEzJ,IAAI,CAAC0J,IAAL,GAAY,KAAZ,GAAoB1J,IAAI,CAACwB,IAFtB;AAGhBP,YAAAA,EAAE,EAAEzB,EAAE,CAAC4H,SAAH,CAAa5H,EAAE,CAACuB,WAAH,CAAeE,EAA5B,EAAgCoG,KAAhC,EAHY;AAIhBnG,YAAAA,EAAE,EAAE1B,EAAE,CAAC4H,SAAH,CAAa5H,EAAE,CAACuB,WAAH,CAAeG,EAA5B,EAAgCmG,KAAhC;AAJY,WAApB;AAMA7H,UAAAA,EAAE,CAACuB,WAAH,CAAeC,OAAf,GAAyB,EAAzB;AAEAxB,UAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,YAAAA,QAAQ,EAAE,IADF;AAERtF,YAAAA,OAAO,EAAE,0CAAYlC,IAAI,CAAC0J,IAAjB,GAAwB,KAAxB,GAAgC1J,IAAI,CAACwB,IAArC,GAA4C,cAF7C;AAGRQ,YAAAA,IAAI,EAAE;AAHE,WAAZ;AAKAxC,UAAAA,EAAE,CAACmK,YAAH;AACH,SAfD,MAeO;AACHnK,UAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,YAAAA,QAAQ,EAAE,IADF;AAERtF,YAAAA,OAAO,EAAE,0BAFD;AAGRF,YAAAA,IAAI,EAAE;AAHE,WAAZ;AAKH;AACJ,OAvBD;AA0BH,KAtcI;AAucL8H,IAAAA,8BAvcK,cAuc4B;AAE7B,UAAItK,EAAE,GAAG,IAAT;;AACA,UAAIA,EAAE,CAACuB,WAAH,CAAeC,OAAf,IAA0B,EAA1B,IAAgCxB,EAAE,CAACuB,WAAH,CAAeC,OAAf,IAA0BmD,SAA9D,EAAyE;AACrE,aAAKoD,QAAL,CAAc;AACVC,UAAAA,QAAQ,EAAE,IADA;AAEVtF,UAAAA,OAAO,EAAE,uBAFC;AAGVF,UAAAA,IAAI,EAAE;AAHI,SAAd;AAKA,eAAO,KAAP;AACH;;AACD+C,MAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqCxF,EAAE,CAACuB,WAAH,CAAeC,OAApD,EAA6D,UAACoE,GAAD,EAAMpF,IAAN,EAAe;AACxE,YAAIA,IAAJ,EAAU;AACNR,UAAAA,EAAE,CAACW,WAAH,CAAeqJ,IAAf,CAAoB;AAChBxI,YAAAA,OAAO,EAAExB,EAAE,CAACuB,WAAH,CAAeC,OADR;AAEhByI,YAAAA,WAAW,EAAEzJ,IAAI,CAAC0J,IAAL,GAAY,KAAZ,GAAoB1J,IAAI,CAACwB,IAFtB;AAGhBK,YAAAA,MAAM,EAAErC,EAAE,CAAC4H,SAAH,CAAa5H,EAAE,CAACuB,WAAH,CAAec,MAA5B,EAAoCwF,KAApC;AAHQ,WAApB;AAKA7H,UAAAA,EAAE,CAACuB,WAAH,CAAeC,OAAf,GAAyB,EAAzB;AAEAxB,UAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,YAAAA,QAAQ,EAAE,IADF;AAERtF,YAAAA,OAAO,EAAE,0CAAYlC,IAAI,CAAC0J,IAAjB,GAAwB,KAAxB,GAAgC1J,IAAI,CAACwB,IAArC,GAA4C,cAF7C;AAGRQ,YAAAA,IAAI,EAAE;AAHE,WAAZ;AAKAxC,UAAAA,EAAE,CAACuK,cAAH;AACH,SAdD,MAcO;AACHvK,UAAAA,EAAE,CAAC+H,QAAH,CAAY;AACRC,YAAAA,QAAQ,EAAE,IADF;AAERtF,YAAAA,OAAO,EAAE,0BAFD;AAGRF,YAAAA,IAAI,EAAE;AAHE,WAAZ;AAKH;AAGJ,OAxBD;AAyBH,KA3eI;AA4eLgI,IAAAA,0BA5eK,YA4esBhC,KA5etB,EA4e6BC,GA5e7B,EA4ekC;AAAA;;AACnC,WAAKI,QAAL,CAAc,kDAAd,EAAkE,SAAlE,EAA6E;AACzEC,QAAAA,iBAAiB,EAAE,IADsD;AAEzEC,QAAAA,gBAAgB,EAAE,QAFuD;AAGzEvG,QAAAA,IAAI,EAAE;AAHmE,OAA7E,EAIGwG,IAJH,CAIQ,YAAM;AAEV,QAAA,MAAI,CAACrI,WAAL,CAAiBuI,MAAjB,CAAwBV,KAAxB,EAA+B,CAA/B;;AACA,QAAA,MAAI,CAACT,QAAL,CAAc;AACVrF,UAAAA,OAAO,0BAAS+F,GAAG,CAACwB,WAAb,4DADG;AAEVzH,UAAAA,IAAI,EAAE;AAFI,SAAd;;AAIA,QAAA,MAAI,CAAC2H,YAAL;AAEH,OAbD,EAaGhB,KAbH,CAaS,YAAM;AACX,QAAA,MAAI,CAACpB,QAAL,CAAc;AACVvF,UAAAA,IAAI,EAAE,MADI;AAEVE,UAAAA,OAAO,EAAE;AAFC,SAAd;AAIH,OAlBD;AAmBH,KAhgBI;AAigBL+H,IAAAA,mBAjgBK,YAigBehC,GAjgBf,EAigBoBD,KAjgBpB,EAigB2B;AAC5B,WAAK7H,WAAL,CAAiB6H,KAAjB,IAA0BC,GAA1B;AACA,UAAIiC,QAAQ,GAAGlC,KAAK,GAAG,CAAvB;AACA;;;;;;AAKA,WAAK2B,YAAL;AAEH,KA3gBI;AA4gBLQ,IAAAA,iCA5gBK,YA4gB6BlC,GA5gB7B,EA4gBkCD,KA5gBlC,EA4gByC;AAC1C,WAAK7H,WAAL,CAAiB6H,KAAjB,IAA0BC,GAA1B;AACA,UAAIiC,QAAQ,GAAGlC,KAAK,GAAG,CAAvB;AACA;;;;;;AAKA,WAAK+B,cAAL;AAEH,KAthBI;AAuhBLK,IAAAA,MAvhBK,cAuhBI;AACL,WAAK7C,QAAL,CAAc;AACVvF,QAAAA,IAAI,EAAE,MADI;AAEVE,QAAAA,OAAO,EAAE;AAFC,OAAd;AAIH,KA5hBI;AA6hBLgE,IAAAA,SA7hBK,cA6hBO;AACR,WAAK/F,WAAL,GAAmB,EAAnB;AACA,WAAKY,WAAL,CAAiBe,MAAjB,GAA0B,EAA1B;;AACA,UAAI,KAAK+E,KAAL,CAAW,gBAAX,CAAJ,EAAkC;AAC9B,aAAKA,KAAL,CAAW,gBAAX,EAA6BwD,WAA7B;AACA,aAAKV,YAAL;AAEH;;AACD,UAAI,KAAK9C,KAAL,CAAW,mBAAX,CAAJ,EAAqC;AACjC,aAAKA,KAAL,CAAW,mBAAX,EAAgCwD,WAAhC;AACA,aAAKV,YAAL;AACH;;AACD,UAAI,KAAK9C,KAAL,CAAW,oBAAX,CAAJ,EAAsC;AAClC,aAAKA,KAAL,CAAW,oBAAX,EAAiCwD,WAAjC;AACA,aAAKN,cAAL;AACH;;AACD,WAAKhJ,WAAL,CAAiBS,IAAjB,GAAwB,EAAxB;AACA,WAAK0C,mBAAL;AACH,KA/iBI;AAgjBLyF,IAAAA,YAhjBK,cAgjBU;AACX,UAAInK,EAAE,GAAG,IAAT;AACA,UAAIkC,OAAO,GAAG,CAAd;AACA,UAAIC,OAAO,GAAG,CAAd;AACAnC,MAAAA,EAAE,CAACW,WAAH,CAAemJ,OAAf,CAAuB,UAAUC,GAAV,EAAe;AAClC7H,QAAAA,OAAO,IAAI4I,UAAU,CAACf,GAAG,CAACtI,EAAL,CAArB;AACAU,QAAAA,OAAO,IAAI2I,UAAU,CAACf,GAAG,CAACrI,EAAL,CAArB;AACH,OAHD;AAIA1B,MAAAA,EAAE,CAACuB,WAAH,CAAeW,OAAf,GAAyB,KAAK0F,SAAL,CAAe1F,OAAf,EAAwBwF,MAAxB,CAA+B,UAA/B,CAAzB;AACA1H,MAAAA,EAAE,CAACuB,WAAH,CAAeY,OAAf,GAAyB,KAAKyF,SAAL,CAAezF,OAAf,EAAwBuF,MAAxB,CAA+B,UAA/B,CAAzB;AACA1H,MAAAA,EAAE,CAAC+K,gBAAH;AACH,KA3jBI;AA4jBLR,IAAAA,cA5jBK,cA4jBY;AACb,UAAIvK,EAAE,GAAG,IAAT;AACA,UAAIoC,WAAW,GAAG,CAAlB;AAEApC,MAAAA,EAAE,CAACW,WAAH,CAAemJ,OAAf,CAAuB,UAAUC,GAAV,EAAe;AAClC3H,QAAAA,WAAW,IAAI0I,UAAU,CAACf,GAAG,CAAC1H,MAAL,CAAzB;AACH,OAFD;AAIArC,MAAAA,EAAE,CAACuB,WAAH,CAAea,WAAf,GAA6B,KAAKwF,SAAL,CAAexF,WAAf,EAA4BsF,MAA5B,CAAmC,UAAnC,CAA7B;AACA1H,MAAAA,EAAE,CAACgL,kBAAH;AACH,KAtkBI;AAukBLD,IAAAA,gBAvkBK,cAukBc;AACf,WAAKxJ,WAAL,CAAiBE,EAAjB,GAAsBqJ,UAAU,CAAC,KAAKlD,SAAL,CAAe,KAAKrG,WAAL,CAAiBW,OAAhC,EAAyC2F,KAAzC,EAAD,CAAV,GAA+DiD,UAAU,CAAC,KAAKlD,SAAL,CAAe,KAAKrG,WAAL,CAAiBY,OAAhC,EAAyC0F,KAAzC,EAAD,CAAzE,GAA8H,CAA9H,GAAkI,CAAlI,GAAsI,EAAEiD,UAAU,CAAC,KAAKlD,SAAL,CAAe,KAAKrG,WAAL,CAAiBW,OAAhC,EAAyC2F,KAAzC,EAAD,CAAV,GAA+DiD,UAAU,CAAC,KAAKlD,SAAL,CAAe,KAAKrG,WAAL,CAAiBY,OAAhC,EAAyC0F,KAAzC,EAAD,CAA3E,CAA5J;AACA,WAAKtG,WAAL,CAAiBG,EAAjB,GAAsBoJ,UAAU,CAAC,KAAKlD,SAAL,CAAe,KAAKrG,WAAL,CAAiBW,OAAhC,EAAyC2F,KAAzC,EAAD,CAAV,GAA+DiD,UAAU,CAAC,KAAKlD,SAAL,CAAe,KAAKrG,WAAL,CAAiBY,OAAhC,EAAyC0F,KAAzC,EAAD,CAAzE,GAA8H,CAA9H,GAAmIiD,UAAU,CAAC,KAAKlD,SAAL,CAAe,KAAKrG,WAAL,CAAiBW,OAAhC,EAAyC2F,KAAzC,EAAD,CAAV,GAA+DiD,UAAU,CAAC,KAAKlD,SAAL,CAAe,KAAKrG,WAAL,CAAiBY,OAAhC,EAAyC0F,KAAzC,EAAD,CAA5M,GAAkQ,CAAxR;;AACA,WAAKjD,iBAAL;AACH,KA3kBI;AA4kBLoG,IAAAA,kBA5kBK,cA4kBgB;AACjB,UAAIhL,EAAE,GAAG,IAAT;AACAA,MAAAA,EAAE,CAACuB,WAAH,CAAec,MAAf,GAAwB,CAAxB;;AACArC,MAAAA,EAAE,CAAC4E,iBAAH;AACH,KAhlBI;AAilBLqC,IAAAA,SAjlBK,cAilBO;AACR,UAAIjH,EAAE,GAAG,IAAT;;AACA,UAAIA,EAAE,CAAC4H,SAAH,CAAa5H,EAAE,CAACuB,WAAH,CAAeW,OAA5B,EAAqC2F,KAArC,OAAiD7H,EAAE,CAAC4H,SAAH,CAAa5H,EAAE,CAACuB,WAAH,CAAeY,OAA5B,EAAqC0F,KAArC,EAArD,EAAmG;AAC/F,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH,KAvlBI;AAwlBLnD,IAAAA,mBAxlBK,YAwlBeD,GAxlBf,EAwlBoB;AACrB,UAAIzE,EAAE,GAAG,IAAT;;AACA,UAAIyE,GAAJ,EAAS;AACLzE,QAAAA,EAAE,CAACuB,WAAH,CAAeI,WAAf,GAA6B8C,GAA7B;AACH;;AACDc,MAAAA,MAAM,CAACC,IAAP,CAAY,oBAAZ,EAAkC7F,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAlC,EAAuDI,EAAE,CAACuB,WAAH,CAAeI,WAAtE,EAAmF3B,EAAE,CAACuB,WAAH,CAAeO,UAAlG,EAA8G,UAAC8D,GAAD,EAAMC,MAAN,EAAiB;AAC3H,YAAI,CAACD,GAAL,EAAU;AACN5F,UAAAA,EAAE,CAACuB,WAAH,CAAeQ,SAAf,GAA2B,CAACkJ,QAAQ,CAACpF,MAAD,CAAR,GAAmB,CAApB,EAAuBqF,QAAvB,EAA3B;AACH;AACJ,OAJD;AAKH;AAlmBI,GAnME;AAuyBXC,EAAAA,OAvyBW,cAuyBD;AACN,SAAKnK,WAAL,GAAmB,IAAnB;AACA,SAAK2F,kBAAL;AACA,SAAKE,wBAAL;AACA,SAAK1G,SAAL;AACAoF,IAAAA,MAAM,CAAC6F,SAAP,CAAiB,kBAAjB;AAEH,GA9yBU;AA+yBXC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,UADM,cACO;AAAA;;AACT,UAAI9K,IAAI,GAAGlB,SAAS,CAACoG,MAAV,CAAiB,UAAA6F,MAAM;AAAA,eAAIA,MAAM,CAACC,IAAP,KAAgB,MAAI,CAAC9L,WAAzB;AAAA,OAAvB,EAA6D,CAA7D,EAAgE,SAAhE,CAAX;AACA,aAAOc,IAAP;AACH;AAJK;AA/yBC,CArtBnB","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import draggable from 'vuedraggable';\n    import compoLang from '../../../both/i18n/lang/elem-label-acc'\n    import {Acc_JournalReact} from \"../../collection/accJournal\";\n\n    // require('cleave.js/dist/addons/cleave-phone.ac');\n    // require('cleave.js/dist/addons/cleave-phone.{country}');\n\n    export default {\n        meteor: {\n            langSession() {\n                return Session.get('lang') || \"en\";\n            },\n            disabledRemove() {\n                return Session.get(\"canRemove\");\n            },\n            disabledUpdate() {\n                return Session.get(\"canUpdate\");\n            },\n            newRe() {\n                let vm = this;\n                Acc_JournalReact.find({}).fetch();\n                vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n            }\n        },\n\n        components: {\n            draggable\n        },\n        data() {\n            return {\n                newLoading: true,\n                fullscreen: true,\n                journalData: [],\n                journalDataDisplay: [],\n                multipleSelection: [],\n                journalId: \"\",\n                loading: false,\n                searchData: '',\n                isSearching: false,\n                currentPage: 1,\n                currentSize: 10,\n                count: 0,\n                dialogAddJournal: false,\n                dialogUpdateJournal: false,\n                dialogShowJournal: false,\n                dialogPaid: false,\n\n\n                journalForm: {\n                    account: \"\",\n                    dr: 0,\n                    cr: 0,\n                    journalDate: moment().toDate(),\n                    currencyId: \"KHR\",\n                    voucherId: \"\",\n                    name: \"\",\n                    memo: \"\",\n                    totalDr: 0,\n                    totalCr: 0,\n                    totalAmount: 0,\n                    amount: 0,\n                    method: \"\"\n\n                },\n                rules: {\n                    journalDate: [{\n                        type: 'date',\n                        required: true,\n                        message: 'Please input Journal Date',\n                        trigger: 'blur'\n                    }],\n                    currencyId: [{required: true, type: 'string', message: 'Please input Currency', trigger: 'blur'}],\n                    voucherId: [{required: true, type: 'string', message: 'Please input Journal No', trigger: 'blur'}],\n                    memo: [{required: true, type: 'string', message: 'Please input Memo', trigger: 'blur'}],\n                },\n                rulesPayment: {\n                    journalDate: [{\n                        type: 'date',\n                        required: true,\n                        message: 'Please input Journal Date',\n                        trigger: 'blur'\n                    }],\n                    currencyId: [{required: true, type: 'string', message: 'Please input Currency', trigger: 'blur'}],\n                    method: [{required: true, type: 'string', message: 'Please input Cash Method', trigger: 'blur'}],\n                    voucherId: [{required: true, type: 'string', message: 'Please input Journal No', trigger: 'blur'}],\n                    memo: [{required: true, type: 'string', message: 'Please input Memo', trigger: 'blur'}],\n                },\n\n                // Options\n                chartAccountDataOption: [],\n\n                dialog: true,\n                notifications: false,\n                sound: true,\n                widgets: false,\n                labelPosition: \"top\",\n                options: {\n                    disabledDate(time) {\n                        return false;\n                    }\n                },\n                disabledDate: false,\n                closeDate: \"\",\n                methodOption: [],\n                type: \"\",\n                journalDetail: {},\n                skip: 0\n            }\n        },\n        mounted() {\n            this.$jQuery('body').off();\n            let vm = this;\n            vm.options = {\n                disabledDate(time) {\n                    let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                    return time.getTime() < min;\n                }\n            }\n\n\n            let elem = this.$jQuery('el-dialog.dialogJournal');\n            let checkEvent = $._data($('body').get(0), 'events');\n            if (checkEvent.keyup.length <= 1) {\n                this.$nextTick(() => {\n                    this.$jQuery('body').on('keydown', elem, this.inputHandler);\n\n                })\n            }\n        },\n        watch: {\n            currentSize(val) {\n                this.isSearching = true;\n                this.skip = (this.currentPage - 1) * val;\n                this.queryData(this.searchData, this.skip, val + this.skip);\n            },\n            currentPage(val) {\n                this.isSearching = true;\n                this.skip = (val - 1) * this.currentSize;\n                this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n            },\n            searchData(val) {\n                this.isSearching = true;\n                this.skip = (this.currentPage - 1) * this.currentSize;\n                this.queryData(val, this.skip, this.currentSize + this.skip);\n            },\n            \"journalForm.journalDate\"(val) {\n                let vm = this;\n                if (vm.dialogUpdateJournal == false) {\n                    vm.journalForm.journalDate = val;\n                    vm.autoIncreseVouchers(val);\n                }\n                if (vm.closeDate && vm.closeDate != \"\" && vm.closeDate != undefined) {\n                    vm.options = {\n                        disabledDate(time) {\n                            let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                            return time.getTime() < min;\n                        }\n                    }\n                } else {\n                    vm.options = {\n                        disabledDate(time) {\n                            return false;\n                        }\n                    }\n                }\n            },\n            \"journalForm.currencyId\"(val) {\n                if (this.dialogUpdateJournal == false) {\n                    this.journalForm.currencyId = val;\n                    this.autoIncreseVouchers();\n                }\n            },\n            dialogAddJournal(val) {\n                if (val) {\n                    this._inputMaskJournal();\n                }\n            },\n            dialogUpdateJournal(val) {\n                if (val) {\n                    this._inputMaskJournal();\n                }\n            },\n            \"journalForm.account\"(val) {\n                if (val) {\n                    this._inputMaskJournal();\n                }\n            },\n            \"journalForm.dr\"(val) {\n                if (val) {\n                    this.journalForm.cr = 0;\n                }\n            },\n            \"journalForm.cr\"(val) {\n                if (val) {\n                    this.journalForm.dr = 0;\n                }\n            },\n            \"journalForm.method\"(val) {\n                if (val) {\n                }\n            }\n        },\n        methods: {\n            handleSizeChange(val) {\n                this.currentSize = val;\n            },\n            handleCurrentChange(val) {\n                this.currentPage = val;\n            },\n            _inputMaskJournal() {\n                setTimeout(() => {\n                    if ($(\".el-inputAmount\").length) {\n                        new this.$_Cleave('.el-inputAmount', {\n                            numeral: true,\n                            numeralThousandsGroupStyle: 'thousand'\n                        });\n                    }\n\n                    if ($(\".el-inputDR\").length) {\n                        new this.$_Cleave('.el-inputDR', {\n                            numeral: true,\n                            numeralThousandsGroupStyle: 'thousand'\n                        });\n                    }\n\n                    if ($(\".el-inputCR\").length) {\n                        new this.$_Cleave('.el-inputCR', {\n                            numeral: true,\n                            numeralThousandsGroupStyle: 'thousand'\n                        });\n                    }\n\n\n                }, 200)\n            },\n            queryData: _.debounce(function (val, skip, limit) {\n                Meteor.call('queryJournal', {\n                    q: val,\n                    filter: this.filter,\n                    rolesArea:Session.get('area'),\n                    options: {skip: skip || 0, limit: limit || 10}\n                }, (err, result) => {\n                    if (!err) {\n                        this.journalDataDisplay = result.content;\n                        this.count = result.countJournal;\n                    }\n                    this.isSearching = false;\n                });\n            }, 300),\n\n            inputHandler(e) {\n                if (e.data.init(0).selector === \"el-dialog.dialogJournal\") {\n                    let vm = this;\n                    if (vm.dialogAddJournal === true) {\n                        if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n                            e.preventDefault();\n                            vm.saveJournal(true, e);\n                        } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n                            e.preventDefault();\n                            vm.saveJournal(false, e);\n                        }\n                    } else if (vm.dialogPaid === true) {\n                        if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n                            e.preventDefault();\n                            vm.saveJournalPaid(true, e, vm.type);\n                        } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n                            e.preventDefault();\n                            vm.saveJournalPaid(false, e, vm.type);\n\n                        }\n                    }\n\n                    if (vm.dialogAddJournal === false && vm.dialogUpdateJournal === false && vm.dialogPaid === false) {\n                        if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n                            e.preventDefault();\n                            vm.popupJournalAdd();\n                            vm.dialogAddJournal = true;\n                            vm.autoIncreseVouchers();\n                            vm.resetForm();\n                        }\n                    }\n                    if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.dialogAddJournal = false;\n                    }\n                }\n\n\n            },\n            chartAccountOption() {\n                let selector = {};\n                if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n                    selector.accountTypeId = this.accountTypeId;\n                }\n\n                Meteor.call('queryChartAccountOption', selector, (err, result) => {\n                    this.chartAccountDataOption = result;\n                })\n            },\n            chartAccountMethodOption() {\n                let selector = {};\n                if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n                    selector.accountTypeId = this.accountTypeId;\n                }\n                Meteor.call('queryChartAccountMethodOption', selector, (err, result) => {\n                    this.methodOption = result;\n                })\n            },\n            saveJournal(isCloseDialog, event) {\n                event.preventDefault();\n                let vm = this;\n                let checkSubmit = this.checkDrCr();\n                if (checkSubmit === false || vm.journalData.length === 0) {\n                    vm.$notify.error({\n                        title: 'Error',\n                        message: 'Dr and Cr is not balance!'\n\n                    });\n\n                    return false;\n                } else {\n                    this.$refs[\"journalFormAdd\"].validate((valid) => {\n                        if (valid) {\n                            let journalDoc = {\n                                journalDate: vm.journalForm.journalDate,\n                                journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n                                voucherId: vm.journalForm.voucherId,\n                                currencyId: vm.journalForm.currencyId,\n                                name: vm.journalForm.name,\n                                memo: vm.journalForm.memo,\n                                total: vm.$_numeral(vm.journalForm.totalDr).value(),\n                                rolesArea: Session.get('area')\n                            };\n                            journalDoc.transaction = vm.journalData;\n                            Meteor.call(\"insertJournal\", journalDoc, (err, result) => {\n                                if (!err) {\n                                    vm.$message({\n                                        duration: 1000,\n                                        message: `Save Successfully!`,\n                                        type: 'success'\n                                    });\n\n                                    if (isCloseDialog) {\n                                        this.dialogAddJournal = false;\n                                    }\n                                    vm.resetForm();\n                                }\n                            })\n                        }\n                    })\n                }\n\n\n            },\n            saveJournalPaid(isCloseDialog, event, type, isPrint) {\n                event.preventDefault();\n                let vm = this;\n                this.$refs[\"journalFormPayment\"].validate((valid) => {\n                    if (valid) {\n                        let journalDoc = {\n                            journalDate: vm.journalForm.journalDate,\n                            journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n                            voucherId: vm.journalForm.voucherId,\n                            currencyId: vm.journalForm.currencyId,\n                            name: vm.journalForm.name,\n                            memo: vm.journalForm.memo,\n                            total: vm.$_numeral(vm.journalForm.totalAmount).value(),\n                            rolesArea: Session.get('area'),\n                            method: vm.journalForm.method\n                        };\n                        journalDoc.transaction = vm.journalData;\n                        if (journalDoc.transaction.length <= 0) {\n                            vm.$message({\n                                duration: 1000,\n                                message: `Add Payment Account!`,\n                                type: 'error'\n                            });\n                            return false;\n                        }\n\n                        Meteor.call(\"insertJournalPaid\", journalDoc, type, (err, result) => {\n                            if (!err) {\n                                if (isPrint === true) {\n                                    FlowRouter.go('/acc-data/accPayment/print?inv=' + result);\n\n                                } else {\n                                    vm.$message({\n                                        duration: 1000,\n                                        message: `Save Successfully!`,\n                                        type: 'success'\n                                    });\n\n                                }\n\n                                if (isCloseDialog) {\n                                    this.dialogPaid = false;\n                                }\n                                vm.resetForm();\n                            }\n                        })\n                    }\n                })\n\n\n            },\n            printPaymentInvoice(journalId) {\n                FlowRouter.go('/acc-data/accPayment/print?inv=' + journalId);\n            },\n            updateJournal(id) {\n                event.preventDefault();\n                let vm = this;\n                let checkSubmit = vm.checkDrCr();\n                if (checkSubmit === false || vm.journalData.length === 0) {\n                    vm.$notify.error({\n                        title: 'Error',\n                        message: 'Dr and Cr is not balance!'\n                    });\n                    return false;\n                } else {\n                    vm.$refs[\"journalFormUpdate\"].validate((valid) => {\n                        if (valid) {\n                            let journalDoc = {\n                                journalDate: vm.journalForm.journalDate,\n                                journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n                                voucherId: vm.journalForm.voucherId,\n                                currencyId: vm.journalForm.currencyId,\n                                name: vm.journalForm.name,\n                                memo: vm.journalForm.memo,\n                                total: vm.$_numeral(vm.journalForm.totalDr).value(),\n                                rolesArea: Session.get('area')\n                            };\n                            journalDoc.transaction = vm.journalData;\n                            Meteor.call(\"updateJournal\", journalDoc, id, (err, result) => {\n                                if (!err) {\n                                    vm.$message({\n                                        duration: 1000,\n                                        message: `Save Successfully!`,\n                                        type: 'success'\n                                    });\n\n                                    vm.dialogUpdateJournal = false;\n\n                                    vm.resetForm();\n                                }\n                            })\n                        }\n                    })\n                }\n\n            },\n            removeJournal(index, row, rows) {\n                let vm = this;\n                if (row.status == \"Normal\") {\n                    Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                        if (re == undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n                            vm.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n                                confirmButtonText: 'OK',\n                                cancelButtonText: 'Cancel',\n                                type: 'warning'\n                            }).then(() => {\n\n\n                                Meteor.call(\"removeJournal\", row._id, (err, result) => {\n                                    if (!err) {\n                                        rows.splice(index, 1);\n                                        vm.$message({\n                                            message: `លុប ${row.journalDateName}​ : ${row.voucherId} បានជោគជ័យ`,\n                                            type: 'success'\n                                        });\n                                    } else {\n                                        vm.$message({\n                                            type: 'error',\n                                            message: 'Delete Fialed'\n                                        });\n                                    }\n\n                                })\n\n\n                            }).catch(() => {\n                                vm.$message({\n                                    type: 'info',\n                                    message: 'Delete canceled'\n                                });\n                            });\n                        } else {\n                            vm.$message({\n                                duration: 1000,\n                                message: \"You already Closing Entry!!\",\n                                type: 'error'\n                            });\n                        }\n                    })\n                } else {\n                    vm.$message({\n                        duration: 1000,\n                        message: \"Not Normal State!!\",\n                        type: 'error'\n                    });\n                }\n\n\n            },\n            popupJournalAdd() {\n                let vm = this;\n                $(\".el-dialog__title\").text(\"Add Journal Entry\");\n                Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                    if (re != undefined) {\n                        vm.closeDate = re.closeDate;\n                    } else {\n                        vm.closeDate = \"\";\n                    }\n                })\n            },\n            popupJournalPayment() {\n                let vm = this;\n                vm.type = \"Payment\";\n                // $('#dialog').attr('title', 'New Title').dialog();\n\n                $(\".el-dialog__title\").text(\"Payment (Account)\");\n                vm.journalForm.method = \"\";\n\n                Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                    if (re != undefined) {\n                        vm.closeDate = re.closeDate;\n                    } else {\n                        vm.closeDate = \"\";\n                    }\n                })\n            },\n            popupJournalReceive() {\n                let vm = this;\n                vm.type = \"Receive\";\n                vm.journalForm.method = \"\";\n\n                // $('#dialog').attr('title', 'New Title').dialog();\n                $(\".el-dialog__title\").text(\"Receive (Account)\");\n\n                Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                    if (re !== undefined) {\n                        vm.closeDate = re.closeDate;\n                    } else {\n                        vm.closeDate = \"\";\n                    }\n                })\n            },\n            popupJournalUpdate(index, row, scope) {\n                let vm = this;\n                $(\".el-dialog__title\").text(\"Update Journal Entry\");\n                if (row.status === \"Normal\") {\n                    Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                        if (re === undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n                            vm.dialogUpdateJournal = true;\n                            vm.findJournalById(scope);\n                            if (re !== undefined) {\n                                vm.closeDate = re.closeDate;\n                            } else {\n                                vm.closeDate = \"\";\n                            }\n\n                        } else {\n                            vm.$message({\n                                duration: 1000,\n                                message: \"You already Closing Entry!!\",\n                                type: 'error'\n                            });\n                            vm.dialogUpdateJournal = false;\n                            vm.closeDate = \"\";\n                        }\n                    })\n                } else {\n                    vm.closeDate = \"\";\n                    this.$message({\n                        duration: 1000,\n                        message: \"Not Normal State!!\",\n                        type: 'error'\n                    });\n                }\n            },\n            popupJournalShow(row) {\n                let vm = this;\n                this.dialogShowJournal = true;\n                $(\".el-dialog__title\").text(\"Show Journal Entry\");\n                Meteor.call(\"queryJournalByIdShow\", row._id, (err, result) => {\n                    if (result) {\n                        vm.journalDetail = result;\n                    } else {\n                        console.log(err.message);\n                    }\n                })\n            },\n            findJournalById(doc) {\n                let vm = this;\n                this.journalId = doc.row._id;\n\n                Meteor.call(\"queryJournalById\", doc.row._id, (err, result) => {\n                    vm.journalData = [];\n                    if (result) {\n                        result.transaction.forEach(function (obj) {\n                            Meteor.call(\"queryChartAccountById\", obj.account, (err, data) => {\n                                vm.journalData.push({\n                                    account: obj.account,\n                                    accountName: data.code + \" : \" + data.name,\n                                    dr: obj.dr,\n                                    cr: obj.cr\n                                })\n\n                                vm.getTotalDrCr();\n                            })\n                        });\n                        vm.journalForm.journalDate = result.journalDate;\n                        vm.journalForm.currencyId = result.currencyId;\n                        vm.journalForm.memo = result.memo;\n                        vm.journalForm.name = result.name;\n                        vm.journalForm.voucherId = result.voucherId.substr(8, 20);\n                    }\n                })\n\n            },\n            addToJournalData() {\n                let vm = this;\n                if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n                    this.$message({\n                        duration: 1000,\n                        message: \"Account Can't Empty!!\",\n                        type: 'error'\n                    });\n                    return false;\n                }\n\n                Meteor.call(\"queryChartAccountById\", vm.journalForm.account, (err, data) => {\n                    if (data) {\n                        vm.journalData.push({\n                            account: vm.journalForm.account,\n                            accountName: data.code + \" : \" + data.name,\n                            dr: vm.$_numeral(vm.journalForm.dr).value(),\n                            cr: vm.$_numeral(vm.journalForm.cr).value()\n                        })\n                        vm.journalForm.account = \"\";\n\n                        vm.$message({\n                            duration: 1000,\n                            message: `បន្ថែម ` + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n                            type: 'success'\n                        });\n                        vm.getTotalDrCr();\n                    } else {\n                        vm.$message({\n                            duration: 1000,\n                            message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n                            type: 'error'\n                        });\n                    }\n                })\n\n\n            },\n            addToJournalPaymentReceiveData() {\n\n                let vm = this;\n                if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n                    this.$message({\n                        duration: 1000,\n                        message: \"Account Can't Empty!!\",\n                        type: 'error'\n                    });\n                    return false;\n                }\n                Meteor.call(\"queryChartAccountById\", vm.journalForm.account, (err, data) => {\n                    if (data) {\n                        vm.journalData.push({\n                            account: vm.journalForm.account,\n                            accountName: data.code + \" : \" + data.name,\n                            amount: vm.$_numeral(vm.journalForm.amount).value(),\n                        })\n                        vm.journalForm.account = \"\";\n\n                        vm.$message({\n                            duration: 1000,\n                            message: `បន្ថែម ` + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n                            type: 'success'\n                        });\n                        vm.getTotalAmount();\n                    } else {\n                        vm.$message({\n                            duration: 1000,\n                            message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n                            type: 'error'\n                        });\n                    }\n\n\n                })\n            },\n            removeJournalDetailByIndex(index, row) {\n                this.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n                    confirmButtonText: 'OK',\n                    cancelButtonText: 'Cancel',\n                    type: 'warning'\n                }).then(() => {\n\n                    this.journalData.splice(index, 1);\n                    this.$message({\n                        message: `លុប ${row.accountName} បានជោគជ័យ`,\n                        type: 'success'\n                    });\n                    this.getTotalDrCr();\n\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: 'Delete canceled'\n                    });\n                });\n            },\n            updateJournalDetail(row, index) {\n                this.journalData[index] = row;\n                let newIndex = index + 1;\n                /*this.$message({\n                    duration: 1000,\n                    message: `Update Row Number ` + newIndex + \" Successfully !\",\n                    type: 'success'\n                });*/\n                this.getTotalDrCr();\n\n            },\n            updateJournalDetailPaymentReceive(row, index) {\n                this.journalData[index] = row;\n                let newIndex = index + 1;\n                /*this.$message({\n                    duration: 1000,\n                    message: `Update Row Number ` + newIndex + \" Successfully !\",\n                    type: 'success'\n                });*/\n                this.getTotalAmount();\n\n            },\n            cancel() {\n                this.$message({\n                    type: 'info',\n                    message: 'Canceled'\n                });\n            },\n            resetForm() {\n                this.journalData = [];\n                this.journalForm.method = \"\";\n                if (this.$refs[\"journalFormAdd\"]) {\n                    this.$refs[\"journalFormAdd\"].resetFields();\n                    this.getTotalDrCr();\n\n                }\n                if (this.$refs[\"journalFormUpdate\"]) {\n                    this.$refs[\"journalFormUpdate\"].resetFields();\n                    this.getTotalDrCr();\n                }\n                if (this.$refs[\"journalFormPayment\"]) {\n                    this.$refs[\"journalFormPayment\"].resetFields();\n                    this.getTotalAmount();\n                }\n                this.journalForm.name = \"\";\n                this.autoIncreseVouchers();\n            },\n            getTotalDrCr() {\n                let vm = this;\n                let totalDr = 0;\n                let totalCr = 0;\n                vm.journalData.forEach(function (obj) {\n                    totalDr += parseFloat(obj.dr);\n                    totalCr += parseFloat(obj.cr);\n                });\n                vm.journalForm.totalDr = this.$_numeral(totalDr).format(\"0,00.000\");\n                vm.journalForm.totalCr = this.$_numeral(totalCr).format(\"0,00.000\");\n                vm.setFormInputDrCr();\n            },\n            getTotalAmount() {\n                let vm = this;\n                let totalAmount = 0;\n\n                vm.journalData.forEach(function (obj) {\n                    totalAmount += parseFloat(obj.amount);\n                });\n\n                vm.journalForm.totalAmount = this.$_numeral(totalAmount).format(\"0,00.000\");\n                vm.setFormInputAmount();\n            },\n            setFormInputDrCr() {\n                this.journalForm.dr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? 0 : -(parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()));\n                this.journalForm.cr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? (parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value())) : 0;\n                this._inputMaskJournal();\n            },\n            setFormInputAmount() {\n                let vm = this;\n                vm.journalForm.amount = 0;\n                vm._inputMaskJournal();\n            },\n            checkDrCr() {\n                let vm = this;\n                if (vm.$_numeral(vm.journalForm.totalDr).value() === vm.$_numeral(vm.journalForm.totalCr).value()) {\n                    return true;\n                }\n                return false;\n            },\n            autoIncreseVouchers(val) {\n                let vm = this;\n                if (val) {\n                    vm.journalForm.journalDate = val;\n                }\n                Meteor.call(\"autoIncreseVoucher\", Session.get('area'), vm.journalForm.journalDate, vm.journalForm.currencyId, (err, result) => {\n                    if (!err) {\n                        vm.journalForm.voucherId = (parseInt(result) + 1).toString();\n                    }\n                })\n            }\n        },\n        created() {\n            this.isSearching = true;\n            this.chartAccountOption();\n            this.chartAccountMethodOption();\n            this.queryData();\n            Meteor.subscribe('Acc_JournalReact');\n\n        },\n        computed: {\n            langConfig() {\n                let data = compoLang.filter(config => config.lang === this.langSession)[0]['journal'];\n                return data;\n            }\n        }\n    }\n\n\n"]},"sourceType":"script","hash":"47dc34d7cd26aab51f3a7ef7d9879b560c65e83c"}
